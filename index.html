<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Rome 2025 ✨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg: #000000;
            --surface: #0a0a0a;
            --card: rgba(18, 18, 18, 0.95);
            --accent: #ff6b35;
            --accent-dim: #cc5528;
            --text: #ffffff;
            --text-dim: #999999;
            --text-muted: #666666;
            --border: rgba(255, 255, 255, 0.08);
            --success: #4ade80;
            --warning: #fbbf24;
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding-top: var(--safe-top);
            padding-bottom: calc(100px + var(--safe-bottom));
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOut 0.5s ease-out 1s forwards;
        }

        @keyframes fadeOut {
            to { opacity: 0; pointer-events: none; }
        }

        .loading-screen h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, var(--accent), var(--text), var(--accent));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 2s linear infinite;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 100;
            padding: calc(16px + var(--safe-top)) 20px 16px;
            border-bottom: 1px solid var(--border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .rome-time {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            font-size: 0.875rem;
        }

        .rome-time .time {
            color: var(--accent);
            font-weight: 600;
            font-size: 1rem;
        }

        .rome-time .label {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .tabs {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            padding: 12px 16px calc(12px + var(--safe-bottom));
            z-index: 100;
            display: flex;
            gap: 6px;
            overflow-x: auto;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            flex: 1;
            min-width: 60px;
            padding: 10px 8px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-dim);
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .tab.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .tab:active {
            transform: scale(0.95);
        }

        .tab-label {
            font-size: 0.7rem;
            opacity: 0.8;
        }

        .tab-main {
            font-size: 0.875rem;
            font-weight: 600;
        }

        .content {
            padding: calc(80px + var(--safe-top)) 20px calc(80px + var(--safe-bottom));
            animation: fadeIn 0.5s ease-out;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .quick-stat {
            background: var(--card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
            animation: slideUp 0.5s ease-out backwards;
        }

        .quick-stat h3 {
            color: var(--accent);
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .essential-card {
            background: var(--card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
            animation: slideUp 0.6s ease-out backwards;
            position: relative;
            overflow: hidden;
        }

        .essential-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent);
        }

        .essential-card h3 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .essential-card .icon {
            font-size: 1.25rem;
        }

        .essential-content {
            color: var(--text-dim);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .tip {
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid rgba(255, 107, 53, 0.3);
            border-radius: 12px;
            padding: 12px;
            margin-top: 12px;
            font-size: 0.875rem;
            color: var(--accent);
        }

        .day-header {
            margin-bottom: 24px;
            animation: fadeIn 0.5s ease-out;
        }

        .day-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--text) 0%, var(--text-dim) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .day-subtitle {
            color: var(--text-dim);
            font-size: 1rem;
        }

        .timeline {
            position: relative;
            padding-left: 32px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--accent), transparent);
            opacity: 0.3;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 24px;
            animation: slideUp 0.6s ease-out backwards;
        }

        .timeline-item:nth-child(1) { animation-delay: 0.1s; }
        .timeline-item:nth-child(2) { animation-delay: 0.2s; }
        .timeline-item:nth-child(3) { animation-delay: 0.3s; }
        .timeline-item:nth-child(4) { animation-delay: 0.4s; }
        .timeline-item:nth-child(5) { animation-delay: 0.5s; }

        .timeline-dot {
            position: absolute;
            left: -26px;
            top: 8px;
            width: 12px;
            height: 12px;
            background: var(--card);
            border: 2px solid var(--text-muted);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .timeline-item.highlight .timeline-dot {
            width: 16px;
            height: 16px;
            left: -28px;
            top: 6px;
            background: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
            animation: pulse 2s infinite;
        }

        .activity-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }

        .activity-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 107, 53, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .activity-card:active {
            transform: scale(0.98);
        }

        .activity-card.expanded {
            background: rgba(18, 18, 18, 1);
            border-color: var(--accent);
        }

        .activity-card.expanded::after {
            opacity: 1;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .activity-main {
            flex: 1;
        }

        .activity-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .activity-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 0.875rem;
            color: var(--text-dim);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .price-badge {
            background: rgba(255, 107, 53, 0.2);
            color: var(--accent);
            padding: 2px 8px;
            border-radius: 6px;
            font-weight: 600;
        }

        .expand-icon {
            color: var(--text-muted);
            transition: transform 0.3s ease;
            font-size: 1.25rem;
        }

        .activity-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .activity-details {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transform: translateY(-10px);
            transition: max-height 0.2s ease-out, 
                        opacity 0.15s ease-out,
                        transform 0.15s ease-out;
        }

        .activity-card.expanded .activity-details {
            max-height: 2000px;
            opacity: 1;
            transform: translateY(0);
            margin-top: 16px;
            transition: max-height 0.35s ease-out, 
                        opacity 0.25s ease-out,
                        transform 0.25s ease-out;
        }
        
        .activity-card.collapsing .activity-details {
            transition: max-height 0.15s ease-out, 
                        opacity 0.1s ease-out,
                        transform 0.1s ease-out;
        }

        .activity-description {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .action-buttons {
            display: none;
            gap: 12px;
            margin-top: 16px;
        }

        .activity-card.expanded .action-buttons {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .action-buttons a,
        .action-buttons button {
            pointer-events: auto;
            cursor: pointer;
            z-index: 10;
            position: relative;
        }

        .btn {
            flex: 1;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            display: inline-block;
        }
        
        a.btn {
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:active {
            background: var(--accent-dim);
            transform: scale(0.98);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:active {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(0.98);
        }


        .floating-badge {
            position: fixed;
            top: calc(100px + var(--safe-top));
            right: 20px;
            background: var(--success);
            color: var(--bg);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(74, 222, 128, 0.3);
            z-index: 90;
            animation: slideUp 0.5s ease-out;
        }

        .search-box {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-input {
            flex: 1;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1rem;
            outline: none;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }


        @media (min-width: 768px) {
            .content {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        .swipe-hint {
            position: fixed;
            bottom: calc(100px + var(--safe-bottom));
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 107, 53, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            animation: slideUp 0.5s ease-out, fadeOut 3s ease-out 2s forwards;
            z-index: 200;
        }

        .restaurant-grid {
            display: grid;
            gap: 12px;
            margin-top: 16px;
        }

        .restaurant-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .restaurant-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .restaurant-details {
            font-size: 0.875rem;
            color: var(--text-dim);
        }

        .booking-reminder {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: center;
        }

        .booking-reminder h4 {
            color: var(--warning);
            margin-bottom: 8px;
        }

        .booking-reminder p {
            color: var(--text-dim);
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="loading-screen">
        <h1>Roma</h1>
    </div>

    <header class="header">
        <div class="header-content">
            <h1>Rome 2025</h1>
            <div class="rome-time">
                <span class="time" id="rome-time">--:--</span>
                <span class="label">Rome Time</span>
            </div>
        </div>
    </header>

    <div class="tabs" id="tabs-container">
        <!-- Tabs will be generated dynamically -->
    </div>

    <div class="content" id="content-container">
        <!-- Content will be generated dynamically -->
    </div>

    <div class="swipe-hint">Swipe or tap days to navigate</div>

    <script>
        // DATA STRUCTURES
        const travelData = {
            stats: {
                days: "4",
                budget: "€280",
                location: "Regola", 
                temperature: "35°C"
            },
            
            tabs: [
                // { id: 'essentials', label: 'ROME', main: 'Tips' },
                { id: 'day0', label: 'FRI', main: '29' },
                { id: 'day1', label: 'SAT', main: '30' },
                { id: 'day2', label: 'SUN', main: '31' },
                { id: 'day3', label: 'MON', main: '1' },
                { id: 'day4', label: 'TUE', main: '2' }
                // { id: 'food', label: 'ALL', main: 'Food' },
                // { id: 'bookings', label: 'BOOK', main: 'Now' }
            ],

            essentials: [
                {
                    icon: "💧",
                    title: "Water Fountains (Nasoni)",
                    content: "Rome has 2,500 free water fountains. Cover the spout with your hand to create a drinking arc from the top hole. Same water as Roman homes - tested 250,000 times yearly.",
                    tip: "💡 Download the Waidy WOW app to find the nearest fountain"
                },
                {
                    icon: "💶",
                    title: "Cash Strategy", 
                    content: "Budget €30-40 cash daily. Essential for: street food, markets, churches, traditional trattorias, and \"broken\" card readers. Use ATMs marked \"Bancomat\" at banks for best rates.",
                    tip: "💡 Many places in Trastevere and Campo de' Fiori are cash only"
                },
                {
                    icon: "🌡️",
                    title: "August Heat Schedule",
                    content: "<strong>8:30-11:30 AM:</strong> Outdoor monuments<br><strong>12:00-4:00 PM:</strong> Museums, churches, long lunches<br><strong>4:00-7:00 PM:</strong> Parks, shopping<br><strong>7:00 PM-late:</strong> Aperitivo, dinner, strolls"
                },
                {
                    icon: "📍",
                    title: "From Regola You Can Walk To",
                    content: "<strong>Campo de' Fiori:</strong> 3 minutes<br><strong>Pantheon:</strong> 8 minutes<br><strong>Jewish Quarter:</strong> 5 minutes<br><strong>Trastevere:</strong> 10 minutes (Ponte Sisto)<br><strong>Colosseum:</strong> 20 minutes<br><strong>Vatican:</strong> 25 minutes",
                    button: {
                        text: "Get Walking Directions",
                        onclick: "getDirections()",
                        class: "btn-primary",
                        style: "margin-top: 12px; width: 100%;"
                    }
                },
                {
                    icon: "🍕",
                    title: "Restaurant Closing Times",
                    content: "Most restaurants close 2:30-7:00 PM for riposo. Pizza al taglio places and markets usually stay open. In August, some neighborhood spots close for holidays but tourist areas remain open."
                },
                {
                    icon: "🎫",
                    title: "Booking Essentials",
                    content: "<strong>Colosseum Underground:</strong> Book EXACTLY 30 days before at 8:45 AM Rome time<br><strong>Vatican Museums:</strong> Book ASAP, early entry worth it<br><strong>Restaurants:</strong> Use TheFork for 30-50% discounts<br><strong>Domus Aurea:</strong> Weekends only, book ahead"
                }
            ],

            days: {
                day0: {
                    title: "Arrival Day",
                    subtitle: "Friday, August 29 • Sunset & Trastevere",
                    reminder: {
                        title: "🌅 Tonight's Sunset: 7:48 PM",
                        text: "Arrive at Aventine Hill by 7:15 PM for best spots"
                    },
                    activities: [
                        {
                            title: "🍹 Aperitivo at Vinaietto",
                            meta: [
                                { icon: "⏰", text: "6:00 PM" },
                                { icon: "📍", text: "Near Campo de' Fiori" },
                                { text: "€5-10/glass", class: "price-badge" }
                            ],
                            description: "<strong>Vinaietto - Old Winery (Via del Monte della Farina 38)</strong><br>Family-run since 1988, this authentic Roman wine bar has 600+ bottles and communist posters on the walls. NO FOOD served (only hard-boiled eggs!) - grab pizza from nearby Roscioli first. You'll stand outside on cobblestones with locals discussing politics. Only 3 tiny tables inside. Staff picks daily wine specials - trust their organic selections. Open till 11 PM.",
                            tip: "💡 Arrive by 6:00 PM before crowds. Say 'Cin cin' before drinking. Cash preferred. Take your Roscioli pizza here - it's the Roman way!",
                            buttons: [
                                { text: "Directions", url: "https://www.google.com/maps/place/Vinaietto+-+Old+Winery/@41.8945947,12.4691959,16z/data=!4m10!1m3!11m2!2sIz-NacgOqZbMhnw2usndwJdsc4a5rQ!3e3!3m5!1s0x132f604f28d2e77d:0x2dcacf15b244d58f!8m2!3d41.8945977!4d12.4749146", class: "btn-primary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "🌅 Aventine Hill Sunset",
                            meta: [
                                { icon: "⏰", text: "7:30 PM" },
                                { icon: "📍", text: "10 min walk from aperitivo" },
                                { text: "Free" }
                            ],
                            description: "Orange Garden (Giardino degli Aranci) offers Rome's most breathtaking panoramic views. The sunset light hitting St. Peter's dome is pure magic. Don't miss the famous Keyhole view at Knights of Malta - just 2 minutes away. This is where you'll realize you're really in Rome.",
                            buttons: [
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Giardino+degli+Aranci+Rome", class: "btn-primary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "🍝 Dinner at Oste Nostro ✅",
                            meta: [
                                { icon: "⏰", text: "8:30 PM" },
                                { icon: "📍", text: "Trastevere" },
                                { text: "€20-30", class: "price-badge" }
                            ],
                            description: "BOOKED for 8:30 PM! Best tiramisu in Rome awaits. The carbonara and gricia are exceptional - authentic Roman pasta at its finest. Located at Vicolo del Bologna 87/89. If you got the TheFork discount (30% off), even better! Save room for that legendary tiramisu.",
                            tip: "💡 Cash preferred, but cards accepted. The tiramisu sells out - order it when you order mains!",
                            buttons: [
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Oste+Nostro+Vicolo+del+Bologna+87+Rome", class: "btn-primary" },
                                { text: "View Menu", url: "https://www.thefork.com", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "🥃 Post-Dinner Drinks",
                            meta: [
                                { icon: "⏰", text: "10:30 PM" },
                                { icon: "📍", text: "Trastevere nightlife" },
                                { text: "€10-18", class: "price-badge" }
                            ],
                            description: "<strong>HEY GÜEY Cocktail Bar y Taqueria</strong><br>Mexican-inspired cocktails and late-night tacos. Mezcal and tequila focused, vibrant atmosphere. 7-min walk from Oste Nostro. Open till 2 AM Friday.<br><br><strong>Bar San Calisto</strong><br>5-min from dinner. The anti-tourist bar. €5 spritz, chess-playing locals, plastic chairs on the piazza. Open till 2 AM.<br><br><strong>Pimm's Good</strong><br>3-min from dinner. Hip cocktail bar with creative drinks, €12-15. Great atmosphere, young crowd.<br><br><strong>Ombre Rosse</strong><br>2-min from dinner. Wine bar on Piazza Sant'Egidio, live music some nights, great for a nightcap.",
                            tip: "💡 All within easy walking distance of Oste Nostro - perfect for bar hopping!",
                            buttons: [
                                { text: "HEY GÜEY Location", url: "https://www.google.com/maps/place/HEY+G%C3%9CEY+%E2%80%A2+Cocktail+Bar+Y+Taqueria/@41.8931815,12.4758175,17z", class: "btn-primary" }
                            ]
                        }
                    ]
                },
                day1: {
                    title: "The Sights",
                    subtitle: "Saturday, August 30 • Your first full day",
                    reminder: {
                        title: "✅ Tickets Secured",
                        text: "Colosseum regular tour booked for 8:45 AM"
                    },
                    activities: [
                        {
                            highlight: true,
                            title: "🏛️ Colosseum Tour ✅",
                            meta: [
                                { icon: "⏰", text: "8:45 AM (arrive 8:30 AM)" },
                                { icon: "⏱️", text: "1.5 hours" },
                                { text: "€16", class: "price-badge" }
                            ],
                            description: "The Colosseum was Rome's grand amphitheater, where 50,000 Romans watched gladiatorial combat and naval battles. Built in 72 AD, it remains the largest amphitheater ever constructed. Morning visit means fewer crowds and better photos. Bring your ID, no backpacks allowed.",
                            buttons: [
                                { text: "View Tickets", url: "https://drive.google.com/file/d/1MUadXd1WZTNcmjuRdyEyCP90hUMixmb5/view?usp=drive_link", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Colosseum+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "🏛️ Roman Forum & Palatine Hill ✅",
                            meta: [
                                { icon: "⏰", text: "11:00 AM" },
                                { icon: "⏱️", text: "1.5 hours" },
                                { text: "Included" }
                            ],
                            description: "PRO TIP: Enter via Palatine Hill entrance on Via di San Gregorio - ZERO queues! Included in your Colosseum ticket. See where emperors lived, then descend into the Forum. Find the House of the Vestal Virgins and Julius Caesar's cremation site.",
                            buttons: [
                                { text: "View Tickets", url: "https://drive.google.com/file/d/1MUadXd1WZTNcmjuRdyEyCP90hUMixmb5/view?usp=drive_link", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Roman+Forum+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "🍴 Lunch at Grappolo d'Oro ✅",
                            meta: [
                                { icon: "⏰", text: "12:30 PM" },
                                { icon: "⏱️", text: "1.5 hours" },
                                { text: "€34 tasting menu", class: "price-badge" }
                            ],
                            description: "BOOKED for 12:30 PM! Michelin Bib Gourmand winner near Campo de' Fiori. Their €34 tasting menu includes four authentic Roman courses. The carbonara is legendary, and the air conditioning is a blessing after the morning at the Forum. Just an 8-minute walk from the Roman Forum. Cash preferred but cards accepted.",
                            tip: "💡 Perfect timing - you'll beat the lunch rush and have AC refuge from the midday heat!",
                            buttons: [
                                { text: "Directions", url: "https://www.google.com/maps/place/Hosteria+Grappolo+d'oro/@41.8962819,12.4722692,17z", class: "btn-primary" },
                                { text: "Restaurant Website", url: "https://hosteriagrappolodoro.it/en/", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "😴 Siesta Time",
                            meta: [
                                { icon: "⏰", text: "2:45 PM" },
                                { icon: "⏱️", text: "45 minutes" },
                                { text: "Free" }
                            ],
                            description: "Head back to Regola for a quick rest. It's a 20-minute walk from lunch, and you'll need energy for the Vatican. Plus, avoiding the peak afternoon heat (35°C) is essential. Romans do this for a reason - embrace it!"
                        },
                        {
                            highlight: true,
                            title: "⛪ Vatican & Sistine Chapel Guided Tour ✅",
                            meta: [
                                { icon: "⏰", text: "4:30 PM (arrive 4:00 PM)" },
                                { icon: "⏱️", text: "2 hours" },
                                { text: "€40", class: "price-badge" }
                            ],
                            description: "BOOKED! English guided tour includes earphones and skip-the-line access. Meet at 'Guided Tours' desk after security. Michelangelo's Sistine Chapel ceiling is the pinnacle of Renaissance art. Dress code strictly enforced: shoulders and knees must be covered. The Gallery of Maps will blow your mind.",
                            buttons: [
                                { text: "View Tickets", url: "G:/My Drive/7. Holidays/Rome 2025/Vatican Tickets.pdf", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Vatican+Museums+entrance", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "🥂 Aperitivo in Prati",
                            meta: [
                                { icon: "⏰", text: "6:30 PM" },
                                { icon: "📍", text: "Prati neighborhood" },
                                { text: "€8-12/spritz", class: "price-badge" }
                            ],
                            description: "<strong>1. La Zanzara</strong><br>Via Crescenzio 84 - The neighborhood favorite. Buzzing atmosphere with tapas served 6-8:30 PM. Perfect Aperol Spritz €8. 10-min walk to L'Elementare.<br><br><strong>2. Il Sorpasso</strong><br>Via Properzio 31 - Shabby-chic spot near Vatican. Excellent Italian cured meats with your spritz. Wine bar vibe, not touristy.<br><br><strong>3. Emerald's Bar</strong><br>Via Crescenzio 91C - Stylish lounge atmosphere. Signature cocktails and classic spritz. Brass and velvet decor, equatorial vibes.<br><br><strong>4. Bukowski's Bar</strong><br>12 different types of spritz! Casual neighborhood spot, great for groups. Excellent Italian wine selection too.",
                            tip: "💡 La Zanzara fills up by 7 PM on Saturdays - arrive by 6:30 for seats!",
                            buttons: [
                                { text: "La Zanzara Directions", url: "https://www.google.com/maps/place/La+Zanzara/@41.9083,12.4596,17z", class: "btn-primary" },
                                { text: "View All Options", url: "https://www.google.com/maps/search/?api=1&query=aperitivo+bars+Via+Crescenzio+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "🍕 L'Elementare Pizza ✅",
                            meta: [
                                { icon: "⏰", text: "8:15 PM" },
                                { icon: "📍", text: "Testaccio" },
                                { text: "€15-20", class: "price-badge" }
                            ],
                            description: "BOOKED for 8:15 PM! Authentic Roman-style pizza with that perfect 'scrocchiarella' crunch. Via degli Stradivari 27, between Testaccio and Trastevere. Gambero Rosso '2 Spicchi' winner. Try their 'Datte Foco' (spicy) or 'Saltimbocca alla Romana'. Order supplì to start - they're legendary. 500+ pizzas a night on weekends but quality never drops.",
                            tip: "💡 Service can be quick on busy Saturdays - embrace the Roman efficiency!",
                            buttons: [
                                { text: "Directions", url: "https://www.google.com/maps/place/L'Elementare+Ponte+Testaccio/@41.8764,12.4731,17z/data=!3m1!4b1", class: "btn-primary" },
                                { text: "Call Restaurant", url: "tel:+390670163482", class: "btn-secondary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "🍸 Argot Speakeasy ✅",
                            meta: [
                                { icon: "⏰", text: "11:00 PM" },
                                { icon: "📍", text: "Campo de' Fiori" },
                                { text: "€10-13", class: "price-badge" }
                            ],
                            description: "BOOKED for 11:00 PM! Mixology bar with live music on Saturday nights. 1920s Parisian-style speakeasy just steps from Campo de' Fiori. Ring the doorbell for entry. €10 membership card required (one-time fee). Jazz, blues, and soul soundtrack. Cash only. Perfect nightcap after pizza - and only a 5-minute walk back to Regola!",
                            tip: "💡 Saturday is their busiest night with live music - atmosphere will be electric!",
                            buttons: [
                                { text: "Directions from L'Elementare", url: "https://www.google.com/maps/dir/L'Elementare+Ponte+Testaccio/Argot+Rome", class: "btn-primary" }
                            ]
                        }
                    ]
                },
                day2: {
                    title: "Relaxed Sunday",
                    subtitle: "Sunday, August 31 • Shopping & pasta making",
                    reminder: {
                        title: "✅ Pasta & Gelato Class Booked",
                        text: "6:30 PM near Trevi Fountain - 3 hour experience"
                    },
                    activities: [
                        {
                            title: "☕ Lazy Sunday Start",
                            meta: [
                                { icon: "⏰", text: "10:00 AM" },
                                { icon: "📍", text: "Campo de' Fiori" },
                                { text: "€8-12", class: "price-badge" }
                            ],
                            description: "After yesterday's big sightseeing day, ease into Sunday. <strong>Sant'Eustachio Il Caffè</strong> near the Pantheon serves Rome's most famous coffee - try their gran caffè with secret sugar cream. Or stay local at <strong>Barnum Café</strong> in Campo for excellent brunch. Most shops open at noon on Sundays."
                        },
                        {
                            title: "🛍️ Trastevere Sunday Market",
                            meta: [
                                { icon: "⏰", text: "11:00 AM" },
                                { icon: "📍", text: "Porta Portese" },
                                { text: "Free entry", class: "price-badge" }
                            ],
                            description: "Rome's biggest flea market runs Sunday mornings only. Vintage leather, antiques, vinyl, clothes - haggling expected. Cash only. Pickpocket alert: keep valuables secure. The market stretches for 2km along the Tiber. Even if you don't buy, the people-watching is fantastic.",
                            tip: "💡 Go early (by 10 AM) for best finds, winds down by 2 PM"
                        },
                        {
                            title: "🚶 Trastevere Wandering",
                            meta: [
                                { icon: "⏰", text: "12:30 PM" },
                                { icon: "📍", text: "Trastevere" },
                                { text: "Free" }
                            ],
                            description: "Sunday in Trastevere feels like a village festa. Peek into artisan shops on Via del Moro and Via della Pelliccia. <strong>Almost Corner Bookshop</strong> has English books. <strong>Polvere di Tempo</strong> sells handmade clocks and sundials. Stop at Basilica Santa Maria for Cavallini's 13th-century mosaics.",
                            buttons: [
                                { text: "Walking Route", url: "https://www.google.com/maps/dir/Porta+Portese/Via+del+Moro/Santa+Maria+in+Trastevere", class: "btn-primary" }
                            ]
                        },
                        {
                            title: "🧺 Sunday Picnic in Villa Celimontana",
                            meta: [
                                { icon: "⏰", text: "1:00 PM" },
                                { icon: "📍", text: "Between Trastevere & San Clemente" },
                                { text: "€15-20", class: "price-badge" }
                            ],
                            description: "<strong>Picnic Shopping (12:30 PM)</strong><br>Stop at San Cosimato Market (open till 1 PM Sunday!) or grab supplies from Porta Portese. Get fresh mozzarella, prosciutto, bread, tomatoes, fruit, and wine. Or pick up porchetta sandwiches from a food truck.<br><br><strong>Villa Celimontana (1:00-3:00 PM)</strong><br>Rome's hidden gem park - 10 min from Colosseum, perfect between morning market and afternoon San Clemente. Ancient trees provide shade, panoramic views over southern Rome, locals only, drinking fountains. Free entry, peaceful Sunday vibes.",
                            tip: "💡 Alternative: Giardino degli Aranci if you want sunset views later - explicitly allows picnics!",
                            buttons: [
                                { text: "Villa Celimontana Map", url: "https://www.google.com/maps/place/Villa+Celimontana/@41.8844,12.4965,17z", class: "btn-primary" },
                                { text: "San Cosimato Market", url: "https://www.google.com/maps/place/Piazza+di+San+Cosimato", class: "btn-secondary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "⛪ San Clemente Basilica ✅",
                            meta: [
                                { icon: "⏰", text: "3:00 PM (arrive 2:45 PM)" },
                                { icon: "⏱️", text: "30 min" },
                                { text: "€10", class: "price-badge" }
                            ],
                            description: "BOOKED for 3:00 PM! Descend through three churches built atop each other - 12th century, 4th century, then 1st century Mithraic temple. You'll hear underground streams that still flow through ancient Rome. The 12th-century mosaics in the upper church are stunning. Sunday afternoon slot secured - fewer tour groups!",
                            buttons: [
                                { text: "View Tickets", url: "G:/My Drive/7. Holidays/Rome 2025/San Clemente Tickets.pdf", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Basilica+di+San+Clemente+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "💧 Vicus Caprarius - City of Water ⚠️",
                            meta: [
                                { icon: "⏰", text: "5:00 PM" },
                                { icon: "⏱️", text: "30 min" },
                                { text: "€3.50", class: "price-badge" }
                            ],
                            description: "The 'City of Water' beneath Trevi Fountain - perfect timing before your class nearby! See the still-functioning 2000-year-old aqueduct that feeds Trevi's fountains. The archaeological site includes an ancient Roman apartment building. It's a 15-minute walk from San Clemente, and you'll end up right next to Trevi Fountain.",
                            tip: "💡 After visiting, grab a quick gelato at Gelateria Valentino before class",
                            buttons: [
                                { text: "Walk from San Clemente", url: "https://www.google.com/maps/dir/Basilica+di+San+Clemente/Vicus+Caprarius+City+of+Water+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "👨‍🍳 Pasta & Gelato Making Class ✅",
                            meta: [
                                { icon: "⏰", text: "6:30 PM (arrive 6:15 PM)" },
                                { icon: "⏱️", text: "3 hours" },
                                { text: "Paid", class: "price-badge" }
                            ],
                            description: "BOOKED! Learn to make fresh pasta and gelato with local chefs. Meeting point: Via Quattro Novembre 139 (look for Towns of Italy Hub). You'll master pasta shapes, perfect sauces, and create authentic gelato. The class includes dinner - you eat what you make! Confirmation: TA9NTCBK. Guest name: Michaela.",
                            buttons: [
                                { text: "View Booking", url: "G:/My Drive/7. Holidays/Rome 2025/Pasta & Gelato.pdf", class: "btn-primary" },
                                { text: "Directions to Class", url: "https://www.google.com/maps/search/?api=1&query=Via+Quattro+Novembre+139+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "🍷 Local Sunday Night Wine",
                            meta: [
                                { icon: "⏰", text: "9:30 PM" },
                                { icon: "📍", text: "En route to Regola" },
                                { text: "€4-8/glass", class: "price-badge" }
                            ],
                            description: "<strong>Enoteca Il Piccolo (Via del Governo Vecchio 74)</strong><br>Rome's smallest, oldest wine bar. €4 generous pours. Old-timers arguing politics with centro residents. Stand outside with locals.<br><br><strong>Mimì e Cocò (Via del Governo Vecchio 72)</strong><br>Next door to Il Piccolo. €7 spritz with snacks. Outdoor tables on cobblestones. 10+ years serving the neighborhood.<br><br><strong>Il Vinaietto (Via del Monte della Farina 38)</strong><br>Your Friday spot! If you loved it, return for a nightcap. €3-4 glasses, locals' chatter spills into street.<br><br><strong>Or ask your pasta teachers!</strong><br>They'll know the best hidden spot for Sunday night.",
                            tip: "💡 Via del Governo Vecchio has 3-4 local bars in 50 meters - perfect for finding the vibe you want",
                            buttons: [
                                { text: "Wine Bar Walking Route", url: "https://www.google.com/maps/dir/Via+Quattro+Novembre+139/Via+del+Governo+Vecchio+72/Regola+Rome", class: "btn-primary" }
                            ]
                        }
                    ]
                },
                day3: {
                    title: "St. Peter's & Food Tour",
                    subtitle: "Monday, September 1 • Grand finale",
                    reminder: {
                        title: "✅ Two Tours Booked Today",
                        text: "9 AM St. Peter's Basilica | 11:30 AM Food Tour"
                    },
                    activities: [
                        {
                            highlight: true,
                            title: "⛪ St. Peter's Basilica ✅",
                            meta: [
                                { icon: "⏰", text: "9:00 AM" },
                                { icon: "⏱️", text: "1 hour" },
                                { text: "Paid", class: "price-badge" }
                            ],
                            description: "BOOKED! Start your last full day at the heart of Christianity. Free visit with Digital Audioguide to discover Bernini's Baldachin, Michelangelo's Pietà and Dome. QR codes required for entry (check email). Arrive early for security checks. Dress code: shoulders and knees covered. Confirmation: TIE-216967.",
                            tip: "💡 The Grottoes under the basilica are included - don't miss St. Peter's tomb!",
                            buttons: [
                                { text: "View Booking", url: "G:/My Drive/7. Holidays/Rome 2025/St Peters Basillica.pdf", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=St+Peters+Square+Vatican+City", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "🛍️ Campo de' Fiori Market",
                            meta: [
                                { icon: "⏰", text: "11:00 AM" },
                                { icon: "📍", text: "15 min from Vatican" },
                                { text: "Free" }
                            ],
                            description: "Walk from St. Peter's to Campo (or grab a quick taxi). Quick browse before your food tour starts right here. The market is at its liveliest now. Perfect timing - you'll meet Bruno here in 30 minutes. Cash only for most vendors."
                        },
                        {
                            highlight: true,
                            title: "🍴 Tasty Rome Street Food Tour ✅",
                            meta: [
                                { icon: "⏰", text: "11:30 AM" },
                                { icon: "⏱️", text: "2.5 hours" },
                                { text: "Paid", class: "price-badge" }
                            ],
                            description: "BOOKED! Meet Bruno at Campo de' Fiori for authentic Roman street food with wine and beer. You'll explore the Jewish Ghetto, sample supplì, maritozzo, pizza bianca, and more local specialties. The tour includes visits to hidden bakeries and the Pantheon (from outside). Confirmation: TARJEJ2R. Guest: Michaela.",
                            tip: "💡 Come hungry - this replaces lunch!",
                            buttons: [
                                { text: "View Booking", url: "G:/My Drive/7. Holidays/Rome 2025/Food Tour.pdf", class: "btn-primary" },
                                { text: "Meeting Point", url: "https://www.google.com/maps/search/?api=1&query=Campo+de+Fiori+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "😴 Post-Tour Siesta",
                            meta: [
                                { icon: "⏰", text: "2:30 PM" },
                                { icon: "📍", text: "Back to Regola" },
                                { text: "Free" }
                            ],
                            description: "You'll be full! Head back for a rest. Perfect time to pack, or just enjoy your terrace/room with all that delicious food settling. The afternoon heat makes this the smart Roman choice."
                        },
                        {
                            title: "🏛️ Last-Minute Sightseeing",
                            meta: [
                                { icon: "⏰", text: "4:00 PM" },
                                { icon: "📍", text: "Your choice" },
                                { text: "Varies", class: "price-badge" }
                            ],
                            description: "<strong>Option 1: Baths of Caracalla</strong> - Massive 3rd-century ruins with underground heating systems. Audio guide essential. €10. Hardly anyone visits despite proximity to Colosseum.<br><br><strong>Option 2: Borghese Gallery</strong> - Book ahead! Bernini sculptures and Caravaggio paintings in a villa. €15.<br><br><strong>Option 3: Capitoline Museums</strong> - Oldest public museum. Marcus Aurelius statue, She-wolf sculpture. €15.<br><br><strong>Option 4: Aperol Spritz at Gianicolo</strong> - Sunset views over all of Rome. Free to walk, €8-12 for drinks.",
                            tip: "💡 Or just wander - sometimes the best Roman memories are unplanned"
                        },
                        {
                            title: "🍹 Last Night Aperitivo ⚠️",
                            meta: [
                                { icon: "⏰", text: "7:00 PM" },
                                { icon: "📍", text: "Your favorite spot" },
                                { text: "€12-20", class: "price-badge" }
                            ],
                            description: "Your victory lap - choose your favorite or try something new!<br><br><strong>Il Sorpasso (Prati)</strong> - €15 generous charcuterie with drinks. Modern Roman vibe.<br><br><strong>Bar San Calisto (Trastevere)</strong> - €5 spritz with local chess players, zero tourists. Authentic Roman night.<br><br><strong>Jacopa Rooftop (Trastevere)</strong> - €10-12 cocktails, Rome's cheapest rooftop with great views.<br><br>Or return to Terrazza Borromini/I Sofà Bar if you loved the views!"
                        },
                        {
                            highlight: true,
                            title: "🍕 Farewell Pizza Night",
                            meta: [
                                { icon: "⏰", text: "8:30 PM" },
                                { icon: "📍", text: "4 legendary options" },
                                { text: "€10-20", class: "price-badge" }
                            ],
                            description: "<strong>1. La Montecarlo (Vicolo del Savelli 11)</strong><br>Since 1906! Tiny basement spot near Campo. Paper-thin Roman style. Cash only. Arrive by 8 PM or queue. The margherita is perfection.<br><br><strong>2. Ai Marmi (Viale Trastevere 53)</strong><br>'L'Obitorio' (the morgue) for its marble tables. Lightning-fast service, crispy thin crusts. €8-12 pizzas. No-nonsense Roman institution.<br><br><strong>3. Emma (Via Monte della Farina 28)</strong><br>Near Campo. Neapolitan-meets-Roman style. Excellent dough, creative toppings. Good for groups, takes reservations.<br><br><strong>4. Pizzeria Remo (Piazza Santa Maria Liberatrice 44, Testaccio)</strong><br>Where Romans go. Chaotic, loud, packed. Paper placemats as plates. €6-10 pizzas. The bruschetta is legendary. Pure Roman energy!",
                            tip: "💡 La Montecarlo & Ai Marmi = no reservations, authentic chaos. Emma = bookable comfort. Remo = Roman madness!",
                            buttons: [
                                { text: "Book Emma", url: "https://www.thefork.com", class: "btn-primary" },
                                { text: "View All Locations", url: "https://www.google.com/maps/search/?api=1&query=La+Montecarlo+OR+Ai+Marmi+OR+Emma+OR+Pizzeria+Remo+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "🥃 Post-Dinner Drinks ⚠️",
                            meta: [
                                { icon: "⏰", text: "10:30 PM" },
                                { icon: "📍", text: "Final nightcap" },
                                { text: "€12-18", class: "price-badge" }
                            ],
                            description: "<strong>Drink Kong (Monti)</strong><br>Blade Runner aesthetic meets Asian-fusion cocktails. Perfect final night energy. Open till 2 AM.<br><br><strong>Jerry Thomas Speakeasy (Regola)</strong><br>If it's not Sunday! World-class cocktails, password required. €15-18.<br><br><strong>The Court (Near Colosseum)</strong><br>Rooftop at Palazzo Manfredi. Colosseum lit up at night. One last Roman view.<br><br><strong>Or just gelato at Giolitti</strong><br>Open till midnight. Sometimes the best ending is simple.",
                            tip: "💡 Don't forget to toss a coin in Trevi Fountain to ensure your return!"
                        }
                    ]
                },
                day4: {
                    title: "Departure Day",
                    subtitle: "Tuesday, September 2 • Arrivederci Roma",
                    reminder: {
                        title: "✈️ Flight at 6:30 PM - Leave by 3:30 PM",
                        text: "Store luggage after checkout • Stay cool indoors • Final lunch at 1 PM"
                    },
                    activities: [
                        {
                            title: "🎒 Check Out & Store Luggage",
                            meta: [
                                { icon: "⏰", text: "9:00 AM" },
                                { icon: "📍", text: "Hotel or nearby storage" },
                                { text: "Free-€4/bag", class: "price-badge" }
                            ],
                            description: "Check out and store bags at your hotel (most offer free storage after checkout - confirm ahead). Alternative: <strong>Radical Storage</strong> has 24/7 locations near Regola (€3-4/bag/day). There's one at Via dei Delfini 22 behind Altar of the Homeland, very close to you. Book online for guaranteed space.",
                            tip: "💡 Pack a small day bag with essentials: passport, boarding pass, phone charger, fresh shirt for the plane",
                            buttons: [
                                { text: "Book Radical Storage", url: "https://radicalstorage.com/luggage-storage/rome", class: "btn-primary" }
                            ]
                        },
                        {
                            title: "🏛️ Morning Museum (Stay Cool!) ⚠️",
                            meta: [
                                { icon: "⏰", text: "9:30 AM - 12:30 PM" },
                                { icon: "📍", text: "Choose your finale" },
                                { text: "€10-15", class: "price-badge" }
                            ],
                            description: "<strong>1. Capitoline Museums</strong><br>Air-conditioned, 10-min walk from Regola. Marcus Aurelius statue, She-wolf sculpture, rooftop terrace views. €15.<br><br><strong>2. Galleria Doria Pamphilj</strong><br>Hidden gem with stunning hall of mirrors. Usually empty, excellent AC. Near Piazza Venezia. €12.<br><br><strong>3. Palazzo Altemps</strong><br>Sculpture museum near Piazza Navona. Cool marble halls, beautiful courtyard. €10.<br><br><strong>4. Churches Circuit</strong><br>Free! Sant'Ignazio (ceiling illusion), Gesù (baroque gold), San Luigi dei Francesi (Caravaggio). Stone keeps them naturally cool.",
                            tip: "💡 Museums have AC, churches are naturally cool from thick stone walls - both perfect for avoiding pre-flight sweat!"
                        },
                        {
                            title: "🛍️ Last-Minute Shopping",
                            meta: [
                                { icon: "⏰", text: "12:30 PM" },
                                { icon: "📍", text: "Near lunch spot" },
                                { text: "Optional" }
                            ],
                            description: "<strong>Rinascente (Via del Tritone)</strong> - Department store with excellent AC. Italian brands, gourmet food floor for gifts.<br><br><strong>Officina Profumo (near Pantheon)</strong> - Santa Maria Novella perfumes, perfect last-minute gifts.<br><br><strong>Castroni (Via Cola di Rienzo)</strong> - Italian food products, coffee, pasta to take home. If near Vatican area.",
                            tip: "💡 Buy liquids after security at duty-free to avoid liquid restrictions"
                        },
                        {
                            highlight: true,
                            title: "🍝 Farewell Lunch ⚠️",
                            meta: [
                                { icon: "⏰", text: "1:00 PM" },
                                { icon: "📍", text: "Near Regola" },
                                { text: "€20-35", class: "price-badge" }
                            ],
                            description: "<strong>1. Er Faciolaro (near Pantheon)</strong><br>Family-run, authentic Roman. Perfect carbonara send-off. AC inside.<br><br><strong>2. Osteria del Pegno (Vicolo di Montevecchio)</strong><br>Hidden gem near Piazza Navona. Roman classics, intimate atmosphere.<br><br><strong>3. Il Bacaro (near Pantheon)</strong><br>Venetian-Roman fusion. Light but satisfying, won't leave you too full for flight.<br><br><strong>4. Return to a Favorite</strong><br>Your last chance for that tiramisu at Oste Nostro or perfect pizza at Emma!",
                            tip: "💡 Book ahead or arrive right at 1 PM - avoid heavy meal before flying",
                            buttons: [
                                { text: "Book on TheFork", url: "https://www.thefork.com", class: "btn-primary" }
                            ]
                        },
                        {
                            title: "🚂 To Airport via Train",
                            meta: [
                                { icon: "⏰", text: "3:30 PM departure" },
                                { icon: "⏱️", text: "32 min to FCO" },
                                { text: "€14/person", class: "price-badge" }
                            ],
                            description: "<strong>Leonardo Express</strong> from Roma Termini is your best bet. Trains every 15 minutes, guaranteed seats, excellent luggage racks. Buy tickets at machines or Trenitalia app. Validate before boarding! The 3:35 PM train arrives at 4:07 PM - perfect timing.<br><br><strong>Alternative:</strong> Taxi €50 fixed fare, but Tuesday afternoon traffic can be unpredictable.",
                            tip: "💡 From Regola to Termini: Take bus 64 or 40 (10 min) or taxi (€10-15)",
                            buttons: [
                                { text: "Buy Train Tickets", url: "https://www.trenitalia.com", class: "btn-primary" },
                                { text: "Rome Taxi App", url: "https://www.ittaxi.it", class: "btn-secondary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "✈️ Flight to London ✅",
                            meta: [
                                { icon: "⏰", text: "6:30 PM departure" },
                                { icon: "⏱️", text: "2h 45min flight" },
                                { text: "BA8086/VY6226", class: "price-badge" }
                            ],
                            description: "BOOKED! British Airways (operated by Vueling) flight BA8086 to London Gatwick. Departs 18:30 from Terminal 1, arrives 20:15 at Gatwick Terminal S. Economy Plus fare includes 1 hand baggage + 1 checked bag (23kg). Online check-in opens 24 hours before. Booking reference: YNMTNO.",
                            buttons: [
                                { text: "View Booking", url: "G:/My Drive/7. Holidays/Rome 2025/Rome to London.pdf", class: "btn-primary" },
                                { text: "Online Check-in", url: "https://www.britishairways.com/travel/managebooking", class: "btn-secondary" }
                            ]
                        }
                    ]
                }
            },

            foodCategories: [
                {
                    icon: "🍕",
                    title: "Pizza Al Taglio (By the Slice)",
                    restaurants: [
                        { name: "Antico Forno Roscioli", details: "Via dei Chiavari 34 (Regola) • €3-8 • Since 1824, pizza rossa legendary" },
                        { name: "Bonci Pizzarium", details: "Near Vatican • €20/two • 72-hour dough, creative toppings" },
                        { name: "Supplizio", details: "Via dei Banchi Vecchi • €3-6 • Gourmet supplì, arrive early" }
                    ]
                },
                {
                    icon: "🍝",
                    title: "Traditional Roman",
                    restaurants: [
                        { name: "Armando al Pantheon ⭐", details: "Family since 1961 • €25-35 • Michelin Bib Gourmand, book essential" },
                        { name: "Da Felice (Testaccio)", details: "Since 1936 • €30-40 • Tableside cacio e pepe, Michelin recognition" },
                        { name: "Flavio al Velavevodetto", details: "Testaccio • €12 gricia • Best value authentic Roman" },
                        { name: "La Campana", details: "Near Pantheon • €15-35 • Claims world's oldest (1518)" }
                    ]
                },
                {
                    icon: "🥂",
                    title: "Aperitivo Spots",
                    restaurants: [
                        { name: "Il Sorpasso", details: "Prati • €15 • Generous charcuterie with drinks" },
                        { name: "Cvlto ⭐", details: "Trastevere • €15 • Former religious shop, password required" },
                        { name: "Freni e Frizioni", details: "Trastevere • €12 • Converted mechanic shop, huge spread" },
                        { name: "Bar San Calisto", details: "Trastevere • €5 • Local chess players, zero tourists" }
                    ]
                },
                {
                    icon: "🍷",
                    title: "Rooftop Bars",
                    restaurants: [
                        { name: "Terrazza Les Étoiles", details: "€20 cocktails • St. Peter's views • Book for sunset" },
                        { name: "Terrazza Borromini", details: "Piazza Navona • €25-30 aperitivo • Chef-prepared canapés" },
                        { name: "Jacopa (Budget)", details: "Trastevere • €10-12 cocktails • Rome's cheapest rooftop" }
                    ]
                }
            ],

            bookingCategories: [
                {
                    icon: "⚡",
                    title: "30 Days Before (July 31)",
                    style: "background: rgba(251, 191, 36, 0.1); border-left-color: var(--warning);",
                    content: "<strong>Colosseum Underground</strong><br>8:45 AM Rome time EXACTLY on ticketing.colosseo.it<br>€24-30 • Sells out in seconds • Groups of 25 vs thousands<br><em>Note: Regular Colosseum tour already booked ✅</em>",
                    button: {
                        text: "Book Colosseum",
                        onclick: "window.open('https://ticketing.colosseo.it')",
                        class: "btn-primary",
                        style: "margin-top: 12px; width: 100%;"
                    }
                },
                {
                    icon: "📅",
                    title: "Book ASAP",
                    restaurants: [
                        { name: "Vatican Museums", details: "€20+5 • museivaticani.va • Early entry worth it" },
                        { name: "Domus Aurea VR", details: "€16 • Weekends only • Underground & cool" },
                        { name: "Armando al Pantheon", details: "Dinner reservation • Family-run since 1961" }
                    ]
                },
                {
                    icon: "📱",
                    title: "This Week",
                    restaurants: [
                        { name: "TheFork App", details: "30-50% off many restaurants • Book Oste Nostro" },
                        { name: "Jerry Thomas Password", details: "thejerrythomasproject.it • €5 membership" },
                        { name: "Rooftop Reservations", details: "Terrazza Les Étoiles for sunset" }
                    ]
                },
                {
                    icon: "📲",
                    title: "Apps to Download",
                    restaurants: [
                        { name: "Waidy WOW", details: "Find Rome's 2,500 free water fountains" },
                        { name: "Moovit", details: "Real-time public transport" },
                        { name: "Google Translate", details: "Download Italian offline" },
                        { name: "TheFork", details: "Restaurant bookings with discounts" }
                    ]
                }
            ]
        };

        // TEMPLATE FUNCTIONS
        function createTabs() {
            return travelData.tabs.map((tab, index) => `
                <div class="tab ${index === 0 ? 'active' : ''}" onclick="showSection('${tab.id}')">
                    <span class="tab-label">${tab.label}</span>
                    <span class="tab-main">${tab.main}</span>
                </div>
            `).join('');
        }

        function createMetaItem(meta) {
            const icon = meta.icon || '';
            const text = meta.text;
            const className = meta.class || '';
            
            if (className === 'price-badge') {
                return `<span class="price-badge">${text}</span>`;
            }
            return `<span class="meta-item">${icon} ${text}</span>`;
        }

        function createActivityCard(activity, index) {
            const highlight = activity.highlight ? 'highlight' : '';
            const meta = activity.meta ? activity.meta.map(createMetaItem).join('') : '';
            const description = activity.description || '';
            const extraDescription = activity.extraDescription ? `<p class="activity-description" style="margin-top: 12px;">${activity.extraDescription}</p>` : '';
            const extraDescription2 = activity.extraDescription2 ? `<p class="activity-description" style="margin-top: 12px;">${activity.extraDescription2}</p>` : '';
            const tip = activity.tip ? `<div class="tip">${activity.tip}</div>` : '';
            
            const restaurants = activity.restaurants ? `
                <div class="restaurant-grid">
                    ${activity.restaurants.map(r => `
                        <div class="restaurant-item">
                            <div class="restaurant-name">${r.name}</div>
                            <div class="restaurant-details">${r.details}</div>
                        </div>
                    `).join('')}
                </div>
            ` : '';
            
            const buttons = activity.buttons ? `
                <div class="action-buttons">
                    ${activity.buttons.map(btn => 
                        btn.url ? `<a href="${btn.url}" class="btn ${btn.class}" target="_blank">${btn.text}</a>` :
                        btn.onclick ? `<button class="btn ${btn.class}" onclick="${btn.onclick}">${btn.text}</button>` :
                        `<span class="btn ${btn.class}">${btn.text}</span>`
                    ).join('')}
                </div>
            ` : '';
            
            // Debug logging
            console.log('Creating card for:', activity.title);
            if (activity.title && activity.title.includes('Colosseum')) {
                console.log('Colosseum activity:', activity);
                console.log('Buttons data:', activity.buttons);
                console.log('Buttons HTML:', buttons);
            }

            return `
                <div class="timeline-item ${highlight}">
                    <div class="timeline-dot"></div>
                    <div class="activity-card">
                        <div class="activity-header">
                            <div class="activity-main">
                                <h3 class="activity-title">${activity.title}</h3>
                                <div class="activity-meta">${meta}</div>
                            </div>
                            <span class="expand-icon">⌄</span>
                        </div>
                        <div class="activity-details">
                            ${description ? `<p class="activity-description">${description}</p>` : ''}
                            ${extraDescription}
                            ${extraDescription2}
                            ${tip}
                            ${restaurants}
                        </div>
                        ${buttons}
                    </div>
                </div>
            `;
        }

        function createEssentialCard(essential) {
            const button = essential.button ? `
                <button class="btn ${essential.button.class}" style="${essential.button.style || ''}" onclick="${essential.button.onclick}">
                    ${essential.button.text}
                </button>
            ` : '';
            
            return `
                <div class="essential-card">
                    <h3><span class="icon">${essential.icon}</span> ${essential.title}</h3>
                    <div class="essential-content">
                        ${essential.content}
                    </div>
                    ${essential.tip ? `<div class="tip">${essential.tip}</div>` : ''}
                    ${button}
                </div>
            `;
        }

        function createFoodCategory(category) {
            return `
                <div class="essential-card">
                    <h3><span class="icon">${category.icon}</span> ${category.title}</h3>
                    <div class="restaurant-grid">
                        ${category.restaurants.map(r => `
                            <div class="restaurant-item">
                                <div class="restaurant-name">${r.name}</div>
                                <div class="restaurant-details">${r.details}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function createBookingCategory(category) {
            const restaurants = category.restaurants ? `
                <div class="restaurant-grid">
                    ${category.restaurants.map(r => `
                        <div class="restaurant-item">
                            <div class="restaurant-name">${r.name}</div>
                            <div class="restaurant-details">${r.details}</div>
                        </div>
                    `).join('')}
                </div>
            ` : '';

            const button = category.button ? `
                <button class="btn ${category.button.class}" style="${category.button.style || ''}" onclick="${category.button.onclick}">
                    ${category.button.text}
                </button>
            ` : '';

            return `
                <div class="essential-card" style="${category.style || ''}">
                    <h3><span class="icon">${category.icon}</span> ${category.title}</h3>
                    ${category.content ? `<div class="essential-content">${category.content}</div>` : ''}
                    ${restaurants}
                    ${button}
                </div>
            `;
        }

        function createDaySection(dayKey, dayData) {
            const reminder = dayData.reminder ? `
                <div class="booking-reminder">
                    <h4>${dayData.reminder.title}</h4>
                    <p>${dayData.reminder.text}</p>
                </div>
            ` : '';

            return `
                <section class="section" id="${dayKey}">
                    <div class="day-header">
                        <h2 class="day-title">${dayData.title}</h2>
                        <p class="day-subtitle">${dayData.subtitle}</p>
                    </div>
                    ${reminder}
                    <div class="timeline">
                        ${dayData.activities.map(createActivityCard).join('')}
                    </div>
                </section>
            `;
        }

        // GENERATE ALL CONTENT
        function generateAllContent() {
            console.log('Generating all content...');
            const tabsContainer = document.getElementById('tabs-container');
            const contentContainer = document.getElementById('content-container');

            // Generate tabs
            tabsContainer.innerHTML = createTabs();

            // Generate content
            const content = `
                <!-- Essentials Section -->
                <!-- <section class="section active" id="essentials">
                    <div class="quick-stat">
                        <h3>Your Trip Overview</h3>
                        <div class="stat-grid">
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.days}</div>
                                <div class="stat-label">Days in Rome</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.budget}</div>
                                <div class="stat-label">Est. Total Budget</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.location}</div>
                                <div class="stat-label">Your Base</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.temperature}</div>
                                <div class="stat-label">August Avg</div>
                            </div>
                        </div>
                    </div>
                    ${travelData.essentials.map(createEssentialCard).join('')}
                </section> -->

                <!-- Day Sections -->
                ${Object.keys(travelData.days).map((dayKey, index) => 
                    createDaySection(dayKey, travelData.days[dayKey]).replace('class="section"', index === 0 ? 'class="section active"' : 'class="section"')
                ).join('')}

                <!-- Food Section -->
                <!-- <section class="section" id="food">
                    <div class="day-header">
                        <h2 class="day-title">Food Bible</h2>
                        <p class="day-subtitle">Every restaurant worth knowing</p>
                    </div>
                    ${travelData.foodCategories.map(createFoodCategory).join('')}
                </section> -->

                <!-- Bookings Section -->
                <!-- <section class="section" id="bookings">
                    <div class="day-header">
                        <h2 class="day-title">Booking Checklist</h2>
                        <p class="day-subtitle">Don't miss these deadlines</p>
                    </div>
                    ${travelData.bookingCategories.map(createBookingCategory).join('')}
                </section> -->
            `;

            contentContainer.innerHTML = content;
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            generateAllContent();
            
            // Handle all clicks with event delegation
            document.addEventListener('click', function(e) {
                // Debug logging
                console.log('Clicked element:', e.target);
                console.log('Element tagName:', e.target.tagName);
                console.log('Element className:', e.target.className);
                console.log('Parent element:', e.target.parentElement);
                
                // Check if we clicked on a button or link
                const button = e.target.closest('.btn');
                const actionButtons = e.target.closest('.action-buttons');
                const link = e.target.closest('a');
                
                if (button || link) {
                    console.log('Button/link detected:', button || link);
                    console.log('URL:', (button || link).href);
                }
                
                // If we clicked a button/link, don't do anything else
                if (button || actionButtons || link) {
                    console.log('Interactive element clicked, not toggling card');
                    // Links will navigate naturally, buttons will execute their onclick
                    return;
                }
                
                // Check if we clicked on an activity card
                const card = e.target.closest('.activity-card');
                if (card) {
                    console.log('Toggling card');
                    toggleCard(card);
                }
            });
        });

        // Update Rome time
        function updateRomeTime() {
            const romeTime = new Date().toLocaleString("en-US", {
                timeZone: "Europe/Rome",
                hour: "2-digit",
                minute: "2-digit",
                hour12: false
            });
            document.getElementById('rome-time').textContent = romeTime;
        }
        updateRomeTime();
        setInterval(updateRomeTime, 60000);

        // Tab navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.add('active');
            }
            
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            if (event && event.target) {
                event.target.closest('.tab').classList.add('active');
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Card expansion
        function toggleCard(card) {
            const isExpanded = card.classList.contains('expanded');
            
            if (!isExpanded) {
                // Expanding
                card.classList.remove('collapsing');
                card.classList.add('expanded');
            } else {
                // Collapsing - add class for faster animation
                card.classList.add('collapsing');
                card.classList.remove('expanded');
                setTimeout(() => {
                    card.classList.remove('collapsing');
                }, 150);
            }
            
            // Haptic feedback on supported devices
            if ('vibrate' in navigator) {
                navigator.vibrate(10);
            }
        }

        // Get directions
        function getDirections() {
            const destinations = {
                'Campo de\' Fiori': 'Campo+de+Fiori+Rome',
                'Pantheon': 'Pantheon+Rome',
                'Jewish Quarter': 'Jewish+Quarter+Rome',
                'Trastevere': 'Trastevere+Rome',
                'Colosseum': 'Colosseum+Rome',
                'Vatican': 'Vatican+City'
            };
            
            const destination = prompt('Where do you want to go?\n\n1. Campo de\' Fiori (3 min)\n2. Pantheon (8 min)\n3. Jewish Quarter (5 min)\n4. Trastevere (10 min)\n5. Colosseum (20 min)\n6. Vatican (25 min)');
            
            if (destination && destinations[destination]) {
                window.open(`https://maps.apple.com/?q=${destinations[destination]}`);
            }
        }

        // Touch swipe support
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            const activeSection = document.querySelector('.section.active').id;
            const sections = ['essentials', 'day0', 'day1', 'day2', 'day3', 'food', 'bookings'];
            const currentIndex = sections.indexOf(activeSection);
            
            if (touchEndX < touchStartX - 50 && currentIndex < sections.length - 1) {
                // Swipe left - next day
                const nextSection = sections[currentIndex + 1];
                document.getElementById(nextSection).classList.add('active');
                document.getElementById(activeSection).classList.remove('active');
                updateTabs(currentIndex + 1);
            }
            
            if (touchEndX > touchStartX + 50 && currentIndex > 0) {
                // Swipe right - previous day
                const prevSection = sections[currentIndex - 1];
                document.getElementById(prevSection).classList.add('active');
                document.getElementById(activeSection).classList.remove('active');
                updateTabs(currentIndex - 1);
            }
        }
        
        function updateTabs(index) {
            document.querySelectorAll('.tab').forEach((t, i) => {
                t.classList.toggle('active', i === index);
            });
        }

        // Add "What's Open Now" feature
        function checkWhatsOpen() {
            const now = new Date();
            const romeTime = new Date(now.toLocaleString("en-US", {timeZone: "Europe/Rome"}));
            const hours = romeTime.getHours();
            
            let status = '';
            if (hours >= 8 && hours < 12) {
                status = 'Museums & monuments open';
            } else if (hours >= 12 && hours < 15) {
                status = 'Lunch time - restaurants open';
            } else if (hours >= 15 && hours < 19) {
                status = 'Siesta - shops may be closed';
            } else if (hours >= 19 && hours < 23) {
                status = 'Aperitivo & dinner time';
            } else {
                status = 'Late night - bars open';
            }
            
            // Could add a floating badge
            if (hours >= 7 && hours < 23) {
                const badge = document.createElement('div');
                badge.className = 'floating-badge';
                badge.textContent = status;
                document.body.appendChild(badge);
                setTimeout(() => badge.remove(), 5000);
            }
        }

        // Check on load
        setTimeout(checkWhatsOpen, 2000);
    </script>
</body>
</html>