<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Rome 2025 ‚ú®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg: #000000;
            --surface: #0a0a0a;
            --card: rgba(18, 18, 18, 0.95);
            --accent: #ff6b35;
            --accent-dim: #cc5528;
            --text: #ffffff;
            --text-dim: #999999;
            --text-muted: #666666;
            --border: rgba(255, 255, 255, 0.08);
            --success: #4ade80;
            --warning: #fbbf24;
            --safe-top: env(safe-area-inset-top);
            --safe-bottom: env(safe-area-inset-bottom);
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding-top: var(--safe-top);
            padding-bottom: calc(100px + var(--safe-bottom));
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOut 0.5s ease-out 1s forwards;
        }

        @keyframes fadeOut {
            to { opacity: 0; pointer-events: none; }
        }

        .loading-screen h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, var(--accent), var(--text), var(--accent));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 2s linear infinite;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 100;
            padding: calc(16px + var(--safe-top)) 20px 16px;
            border-bottom: 1px solid var(--border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .rome-time {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            font-size: 0.875rem;
        }

        .rome-time .time {
            color: var(--accent);
            font-weight: 600;
            font-size: 1rem;
        }

        .rome-time .label {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .tabs {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            padding: 12px 16px calc(12px + var(--safe-bottom));
            z-index: 100;
            display: flex;
            gap: 6px;
            overflow-x: auto;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            flex: 1;
            min-width: 60px;
            padding: 10px 8px;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-dim);
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .tab.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .tab:active {
            transform: scale(0.95);
        }

        .tab-label {
            font-size: 0.7rem;
            opacity: 0.8;
        }

        .tab-main {
            font-size: 0.875rem;
            font-weight: 600;
        }

        .content {
            padding: calc(80px + var(--safe-top)) 20px calc(80px + var(--safe-bottom));
            animation: fadeIn 0.5s ease-out;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .quick-stat {
            background: var(--card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
            animation: slideUp 0.5s ease-out backwards;
        }

        .quick-stat h3 {
            color: var(--accent);
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .essential-card {
            background: var(--card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid var(--border);
            animation: slideUp 0.6s ease-out backwards;
            position: relative;
            overflow: hidden;
        }

        .essential-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent);
        }

        .essential-card h3 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .essential-card .icon {
            font-size: 1.25rem;
        }

        .essential-content {
            color: var(--text-dim);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .tip {
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid rgba(255, 107, 53, 0.3);
            border-radius: 12px;
            padding: 12px;
            margin-top: 12px;
            font-size: 0.875rem;
            color: var(--accent);
        }

        .day-header {
            margin-bottom: 24px;
            animation: fadeIn 0.5s ease-out;
        }

        .day-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--text) 0%, var(--text-dim) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .day-subtitle {
            color: var(--text-dim);
            font-size: 1rem;
        }

        .timeline {
            position: relative;
            padding-left: 32px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--accent), transparent);
            opacity: 0.3;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 24px;
            animation: slideUp 0.6s ease-out backwards;
        }

        .timeline-item:nth-child(1) { animation-delay: 0.1s; }
        .timeline-item:nth-child(2) { animation-delay: 0.2s; }
        .timeline-item:nth-child(3) { animation-delay: 0.3s; }
        .timeline-item:nth-child(4) { animation-delay: 0.4s; }
        .timeline-item:nth-child(5) { animation-delay: 0.5s; }

        .timeline-dot {
            position: absolute;
            left: -26px;
            top: 8px;
            width: 12px;
            height: 12px;
            background: var(--card);
            border: 2px solid var(--text-muted);
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .timeline-item.highlight .timeline-dot {
            width: 16px;
            height: 16px;
            left: -28px;
            top: 6px;
            background: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
            animation: pulse 2s infinite;
        }

        .activity-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }

        .activity-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 107, 53, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .activity-card:active {
            transform: scale(0.98);
        }

        .activity-card.expanded {
            background: rgba(18, 18, 18, 1);
            border-color: var(--accent);
        }

        .activity-card.expanded::after {
            opacity: 1;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .activity-main {
            flex: 1;
        }

        .activity-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .activity-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 0.875rem;
            color: var(--text-dim);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .price-badge {
            background: rgba(255, 107, 53, 0.2);
            color: var(--accent);
            padding: 2px 8px;
            border-radius: 6px;
            font-weight: 600;
        }

        .expand-icon {
            color: var(--text-muted);
            transition: transform 0.3s ease;
            font-size: 1.25rem;
        }

        .activity-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .activity-details {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transform: translateY(-10px);
            transition: max-height 0.2s ease-out, 
                        opacity 0.15s ease-out,
                        transform 0.15s ease-out;
        }

        .activity-card.expanded .activity-details {
            max-height: 2000px;
            opacity: 1;
            transform: translateY(0);
            margin-top: 16px;
            transition: max-height 0.35s ease-out, 
                        opacity 0.25s ease-out,
                        transform 0.25s ease-out;
        }
        
        .activity-card.collapsing .activity-details {
            transition: max-height 0.15s ease-out, 
                        opacity 0.1s ease-out,
                        transform 0.1s ease-out;
        }

        .activity-description {
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .action-buttons {
            display: none;
            gap: 12px;
            margin-top: 16px;
        }

        .activity-card.expanded .action-buttons {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .action-buttons a,
        .action-buttons button {
            pointer-events: auto;
            cursor: pointer;
            z-index: 10;
            position: relative;
        }

        .btn {
            flex: 1;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            display: inline-block;
        }
        
        a.btn {
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:active {
            background: var(--accent-dim);
            transform: scale(0.98);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:active {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(0.98);
        }


        .floating-badge {
            position: fixed;
            top: calc(100px + var(--safe-top));
            right: 20px;
            background: var(--success);
            color: var(--bg);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(74, 222, 128, 0.3);
            z-index: 90;
            animation: slideUp 0.5s ease-out;
        }

        .search-box {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .search-input {
            flex: 1;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1rem;
            outline: none;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }


        @media (min-width: 768px) {
            .content {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        .swipe-hint {
            position: fixed;
            bottom: calc(100px + var(--safe-bottom));
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 107, 53, 0.9);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.875rem;
            animation: slideUp 0.5s ease-out, fadeOut 3s ease-out 2s forwards;
            z-index: 200;
        }

        .restaurant-grid {
            display: grid;
            gap: 12px;
            margin-top: 16px;
        }

        .restaurant-item {
            background: rgba(255, 255, 255, 0.03);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .restaurant-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .restaurant-details {
            font-size: 0.875rem;
            color: var(--text-dim);
        }

        .booking-reminder {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: center;
        }

        .booking-reminder h4 {
            color: var(--warning);
            margin-bottom: 8px;
        }

        .booking-reminder p {
            color: var(--text-dim);
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="loading-screen">
        <h1>Roma</h1>
    </div>

    <header class="header">
        <div class="header-content">
            <h1>Rome 2025</h1>
            <div class="rome-time">
                <span class="time" id="rome-time">--:--</span>
                <span class="label">Rome Time</span>
            </div>
        </div>
    </header>

    <div class="tabs" id="tabs-container">
        <!-- Tabs will be generated dynamically -->
    </div>

    <div class="content" id="content-container">
        <!-- Content will be generated dynamically -->
    </div>

    <div class="swipe-hint">Swipe or tap days to navigate</div>

    <script>
        // DATA STRUCTURES
        const travelData = {
            stats: {
                days: "4",
                budget: "‚Ç¨280",
                location: "Regola", 
                temperature: "35¬∞C"
            },
            
            tabs: [
                { id: 'essentials', label: 'ROME', main: 'Tips' },
                { id: 'day0', label: 'FRI', main: '29' },
                { id: 'day1', label: 'SAT', main: '30' },
                { id: 'day2', label: 'SUN', main: '31' },
                { id: 'day3', label: 'MON', main: '1' },
                { id: 'food', label: 'ALL', main: 'Food' },
                { id: 'bookings', label: 'BOOK', main: 'Now' }
            ],

            essentials: [
                {
                    icon: "üíß",
                    title: "Water Fountains (Nasoni)",
                    content: "Rome has 2,500 free water fountains. Cover the spout with your hand to create a drinking arc from the top hole. Same water as Roman homes - tested 250,000 times yearly.",
                    tip: "üí° Download the Waidy WOW app to find the nearest fountain"
                },
                {
                    icon: "üí∂",
                    title: "Cash Strategy", 
                    content: "Budget ‚Ç¨30-40 cash daily. Essential for: street food, markets, churches, traditional trattorias, and \"broken\" card readers. Use ATMs marked \"Bancomat\" at banks for best rates.",
                    tip: "üí° Many places in Trastevere and Campo de' Fiori are cash only"
                },
                {
                    icon: "üå°Ô∏è",
                    title: "August Heat Schedule",
                    content: "<strong>8:30-11:30 AM:</strong> Outdoor monuments<br><strong>12:00-4:00 PM:</strong> Museums, churches, long lunches<br><strong>4:00-7:00 PM:</strong> Parks, shopping<br><strong>7:00 PM-late:</strong> Aperitivo, dinner, strolls"
                },
                {
                    icon: "üìç",
                    title: "From Regola You Can Walk To",
                    content: "<strong>Campo de' Fiori:</strong> 3 minutes<br><strong>Pantheon:</strong> 8 minutes<br><strong>Jewish Quarter:</strong> 5 minutes<br><strong>Trastevere:</strong> 10 minutes (Ponte Sisto)<br><strong>Colosseum:</strong> 20 minutes<br><strong>Vatican:</strong> 25 minutes",
                    button: {
                        text: "Get Walking Directions",
                        onclick: "getDirections()",
                        class: "btn-primary",
                        style: "margin-top: 12px; width: 100%;"
                    }
                },
                {
                    icon: "üçï",
                    title: "Restaurant Closing Times",
                    content: "Most restaurants close 2:30-7:00 PM for riposo. Pizza al taglio places and markets usually stay open. In August, some neighborhood spots close for holidays but tourist areas remain open."
                },
                {
                    icon: "üé´",
                    title: "Booking Essentials",
                    content: "<strong>Colosseum Underground:</strong> Book EXACTLY 30 days before at 8:45 AM Rome time<br><strong>Vatican Museums:</strong> Book ASAP, early entry worth it<br><strong>Restaurants:</strong> Use TheFork for 30-50% discounts<br><strong>Domus Aurea:</strong> Weekends only, book ahead"
                }
            ],

            days: {
                day0: {
                    title: "Arrival Day",
                    subtitle: "Friday, August 29 ‚Ä¢ Sunset & Trastevere",
                    reminder: {
                        title: "üåÖ Tonight's Sunset: 7:48 PM",
                        text: "Arrive at Aventine Hill by 7:15 PM for best spots"
                    },
                    activities: [
                        {
                            highlight: true,
                            title: "üåÖ Aventine Hill Sunset",
                            meta: [
                                { icon: "‚è∞", text: "7:15 PM" },
                                { icon: "üìç", text: "10 min walk" },
                                { text: "Free" }
                            ],
                            description: "Orange Garden (Giardino degli Aranci) offers Rome's most breathtaking panoramic views. The sunset light hitting St. Peter's dome is pure magic. Don't miss the famous Keyhole view at Knights of Malta - just 2 minutes away. This is where you'll realize you're really in Rome.",
                            buttons: [
                                { text: "Directions", url: "https://maps.apple.com/?q=Giardino+degli+Aranci+Rome", class: "btn-primary" }
                            ]
                        },
                        {
                            title: "üçπ Aperitivo Hour",
                            meta: [
                                { icon: "‚è∞", text: "8:30 PM" },
                                { icon: "üìç", text: "Trastevere" },
                                { text: "‚Ç¨12-15", class: "price-badge" }
                            ],
                            description: "<strong>Cvlto (Vicolo Del Quartiere 7A)</strong><br>Former religious relics shop transformed into a cocktail temple. ‚Ç¨15 cocktails come with excellent tapas. Password from their website required. Intimate setting with both indoor seating and a private garden.",
                            extraDescription: "<strong>Freni e Frizioni (Via del Politeama 4)</strong><br>Converted mechanic shop, now world-famous. Huge aperitivo spread included. Arrive early for terrace seats overlooking the Tiber.",
                            restaurants: [
                                { name: "Alternative: Santo Trastevere", details: "Via della Paglia 40 ‚Ä¢ Extensive gin selection" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "üçù Dinner in Trastevere",
                            meta: [
                                { icon: "‚è∞", text: "9:30 PM" },
                                { icon: "üìç", text: "3 options" },
                                { text: "‚Ç¨20-35", class: "price-badge" }
                            ],
                            restaurants: [
                                {
                                    name: "Oste Nostro ‚≠ê",
                                    details: "Vicolo del Bologna 87/89 ‚Ä¢ ‚Ç¨20-30<br>Best tiramisu in Rome. Book via TheFork for 30% off. The carbonara and gricia are exceptional."
                                },
                                {
                                    name: "Checco er Carettiere",
                                    details: "Via Benedetta 10 ‚Ä¢ ‚Ç¨25-35<br>Since 1935, 4th generation women-run. Try the carciofi alla giudia and legendary amatriciana."
                                },
                                {
                                    name: "La Gensola",
                                    details: "Piazza della Gensola 15 ‚Ä¢ ‚Ç¨30-40<br>Hidden seafood gem. Cash only. Natural wines."
                                }
                            ],
                            buttons: [
                                { text: "Book on TheFork", url: "https://www.thefork.com", class: "btn-primary" }
                            ]
                        }
                    ]
                },
                day1: {
                    title: "The Sights",
                    subtitle: "Saturday, August 30 ‚Ä¢ Your first full day",
                    reminder: {
                        title: "‚úÖ Tickets Secured",
                        text: "Colosseum regular tour booked for 8:45 AM"
                    },
                    activities: [
                        {
                            highlight: true,
                            title: "üèõÔ∏è Colosseum Tour ‚úÖ",
                            meta: [
                                { icon: "‚è∞", text: "8:45 AM (arrive 8:30 AM)" },
                                { icon: "‚è±Ô∏è", text: "1.5 hours" },
                                { text: "‚Ç¨16", class: "price-badge" }
                            ],
                            description: "The Colosseum was Rome's grand amphitheater, where 50,000 Romans watched gladiatorial combat and naval battles. Built in 72 AD, it remains the largest amphitheater ever constructed. Morning visit means fewer crowds and better photos. Bring your ID, no backpacks allowed.",
                            buttons: [
                                { text: "View Tickets", url: "https://drive.google.com/file/d/1MUadXd1WZTNcmjuRdyEyCP90hUMixmb5/view?usp=drive_link", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Colosseum+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "üèõÔ∏è Roman Forum & Palatine Hill ‚úÖ",
                            meta: [
                                { icon: "‚è∞", text: "11:00 AM" },
                                { icon: "‚è±Ô∏è", text: "1.5 hours" },
                                { text: "Included" }
                            ],
                            description: "PRO TIP: Enter via Palatine Hill entrance on Via di San Gregorio - ZERO queues! Included in your Colosseum ticket. See where emperors lived, then descend into the Forum. Find the House of the Vestal Virgins and Julius Caesar's cremation site.",
                            buttons: [
                                { text: "View Tickets", url: "https://drive.google.com/file/d/1MUadXd1WZTNcmjuRdyEyCP90hUMixmb5/view?usp=drive_link", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Roman+Forum+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "üç¥ Lunch Break",
                            meta: [
                                { icon: "‚è∞", text: "1:00 PM" },
                                { icon: "‚è±Ô∏è", text: "1.5 hours" },
                                { text: "‚Ç¨15-35", class: "price-badge" }
                            ],
                            description: "<strong>1. Grappolo d'Oro (Campo de' Fiori)</strong><br>Michelin Bib Gourmand. ‚Ç¨34 tasting menu with four Roman courses. 8-min walk from Forum. Air-conditioned. Carbonara is legendary.<br><br><strong>2. Supplizio (Via dei Banchi Vecchi)</strong><br>Right in Regola! Gourmet suppl√¨ and Roman street food elevated. Arrive at noon or wait. Deep leather armchairs, no reservations.<br><br><strong>3. All'Antico Vinaio (near Pantheon)</strong><br>Halfway back. Massive focaccia sandwiches, ‚Ç¨6-8. Quick, delicious, and famous for good reason. Perfect for eating in a piazza.<br><br><strong>4. Armando al Pantheon</strong><br>Family-run since 1961, another Bib Gourmand. Traditional Roman, ‚Ç¨25-35. Book ahead if possible. AC and classic dishes.",
                            buttons: [
                                { text: "Book Grappolo d'Oro", url: "https://hosteriagrappolodoro.it/en/", class: "btn-primary" },
                                { text: "View on Map", url: "https://www.google.com/maps/search/?api=1&query=restaurants+near+Campo+de+Fiori+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "üò¥ Siesta Time",
                            meta: [
                                { icon: "‚è∞", text: "2:45 PM" },
                                { icon: "‚è±Ô∏è", text: "45 minutes" },
                                { text: "Free" }
                            ],
                            description: "Head back to Regola for a quick rest. It's a 20-minute walk from lunch, and you'll need energy for the Vatican. Plus, avoiding the peak afternoon heat (35¬∞C) is essential. Romans do this for a reason - embrace it!"
                        },
                        {
                            highlight: true,
                            title: "‚õ™ Vatican & Sistine Chapel Guided Tour ‚úÖ",
                            meta: [
                                { icon: "‚è∞", text: "4:30 PM (arrive 4:00 PM)" },
                                { icon: "‚è±Ô∏è", text: "2 hours" },
                                { text: "‚Ç¨40", class: "price-badge" }
                            ],
                            description: "BOOKED! English guided tour includes earphones and skip-the-line access. Meet at 'Guided Tours' desk after security. Michelangelo's Sistine Chapel ceiling is the pinnacle of Renaissance art. Dress code strictly enforced: shoulders and knees must be covered. The Gallery of Maps will blow your mind.",
                            buttons: [
                                { text: "View Tickets", url: "G:/My Drive/7. Holidays/Rome 2025/Vatican Tickets.pdf", class: "btn-primary" },
                                { text: "Directions", url: "https://www.google.com/maps/search/?api=1&query=Vatican+Museums+entrance", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "üçπ Aperitivo",
                            meta: [
                                { icon: "‚è∞", text: "6:30 PM" },
                                { icon: "üìç", text: "Between Vatican & Regola" },
                                { text: "‚Ç¨15-35", class: "price-badge" }
                            ],
                            description: "<strong>1. Terrazza Borromini (Piazza Navona)</strong><br>Stunning 360¬∞ rooftop next to Sant'Agnese dome. Watch the sun set over Rome's skyline. ‚Ç¨25-30 aperitivo. Perfect halfway point. Book ahead.<br><br><strong>2. I Sof√† Bar (Via Giulia)</strong><br>Hotel Indigo's rooftop, 5 min from Regola. Handcrafted cocktails with tapas-style bites. 360¬∞ views of domes and monuments. Open noon-midnight.<br><br><strong>3. Del Monte (Borgo Pio 136)</strong><br>Right by Vatican. Classic Roman aperitivo spot, great for people watching. Outdoor seating, local vibe, ‚Ç¨12-15 for generous spritz + snacks.<br><br><strong>4. Hotel Campo de' Fiori Terrace</strong><br>Multi-level rooftop bar in your neighborhood! 360¬∞ views, sunset perfection. Open till midnight Fri-Sat. All drinks come with Italian aperitif treats.",
                            buttons: [
                                { text: "Book Terrazza Borromini", url: "https://www.eitchborromini.com/en/terrazza", class: "btn-primary" },
                                { text: "View Options on Map", url: "https://www.google.com/maps/search/?api=1&query=aperitivo+bars+near+Piazza+Navona+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            title: "üçΩÔ∏è Dinner",
                            meta: [
                                { icon: "‚è∞", text: "7:30 PM" },
                                { icon: "üìç", text: "Regola/Campo area" },
                                { text: "‚Ç¨25-45", class: "price-badge" }
                            ],
                            description: "<strong>1. Pierluigi (Piazza de' Ricci)</strong><br>Elegant seafood specialist in a romantic piazza, 5 min from Regola. Famous for crudo platters and lobster pasta. Covered outdoor terrace. ‚Ç¨35-45. Book ahead - very popular.<br><br><strong>2. Il Sanlorenzo (Via dei Chiavari 4)</strong><br>Michelin-starred seafood temple. Daily catch displayed like jewelry. Minimalist chic, exceptional wine list. ‚Ç¨45-60. Worth the splurge for impeccable fish.<br><br><strong>3. Open Baladin (Via degli Specchi 6)</strong><br>Modern gastropub with 40 craft beers on tap and gourmet burgers/creative dishes. Not your typical Roman meal - perfect contrast to Friday. ‚Ç¨20-30. Great vegetarian options.<br><br><strong>4. Settembrini (Via Luigi Settembrini 21)</strong><br>Contemporary Roman cuisine with creative twists. Industrial-chic space, natural wines, inventive pasta. Local favorite for modern dining. ‚Ç¨25-35.",
                            buttons: [
                                { text: "Book Pierluigi", url: "https://www.pierluigi.it", class: "btn-primary" },
                                { text: "View on Map", url: "https://www.google.com/maps/search/?api=1&query=restaurants+near+Campo+de+Fiori+Rome", class: "btn-secondary" }
                            ]
                        },
                        {
                            highlight: true,
                            title: "(HOLD) üçï Pizza Quest: L'Elementare",
                            meta: [
                                { icon: "‚è∞", text: "8:00 PM" },
                                { icon: "üìç", text: "Trastevere" },
                                { text: "‚Ç¨15-20", class: "price-badge" }
                            ],
                            description: "New Haven-style crispy-chewy perfection. Their scrocchiarella crust achieves that perfect texture you've been dreaming about. This is the benchmark Roman pizza experience.",
                            tip: "üí° Also try Il Sorpasso (Prati) for aperitivo at 6:45 PM - ‚Ç¨15 spritz with generous charcuterie"
                        },
                        {
                            title: "(HOLD) ü•É Jerry Thomas Speakeasy",
                            meta: [
                                { icon: "‚è∞", text: "10:00 PM" },
                                { icon: "üìç", text: "Regola" },
                                { text: "‚Ç¨15-18", class: "price-badge" }
                            ],
                            description: "Practically next door in Regola. Password required from their website. ‚Ç¨5 membership fee. World-class cocktails in leather armchairs. The Negroni variations are exceptional.",
                            buttons: [
                                { text: "Get Password", url: "https://thejerrythomasproject.it", class: "btn-primary" }
                            ]
                        },
                        {
                            title: "(HOLD) üéÆ Circus Maximus VR (Optional)",
                            meta: [
                                { icon: "üìç", text: "Circus Maximus" },
                                { icon: "‚è±Ô∏è", text: "45 min" },
                                { text: "‚Ç¨7", class: "price-badge" }
                            ],
                            description: "Transform an empty field into a roaring chariot stadium. Watch 250,000 Romans scream for their teams through VR magic. Without VR, it's just grass - with it, you're watching the most dangerous sport in ancient Rome. Can fit in whenever you have time."
                        }
                    ]
                },
                day2: {
                    title: "Vatican & Underground",
                    subtitle: "Sunday, August 31 ‚Ä¢ Sistine Chapel & secrets",
                    reminder: {
                        title: "‚ö° Book Vatican NOW",
                        text: "Early entry tours worth it - 50 vs 5,000 people"
                    },
                    activities: [
                        {
                            title: "üçï Bonci Pizzarium",
                            meta: [
                                { icon: "‚è∞", text: "11:30 AM" },
                                { icon: "üìç", text: "Near Vatican" },
                                { text: "‚Ç¨20/two", class: "price-badge" }
                            ],
                            description: "Gabriele Bonci's 72-hour fermented dough creates legendary pizza al taglio. The mortadella, fig, and cheese combination sounds weird but works brilliantly. ‚Ç¨20 feeds two substantially."
                        },
                        {
                            highlight: true,
                            title: "‚õ™ San Clemente Basilica",
                            meta: [
                                { icon: "‚è∞", text: "2:00 PM" },
                                { icon: "‚è±Ô∏è", text: "1 hour" },
                                { text: "‚Ç¨10", class: "price-badge" }
                            ],
                            description: "Descend through three churches built atop each other - 12th century, 4th century, then 1st century Mithraic temple. You'll hear underground streams that still flow through ancient Rome. No booking needed."
                        },
                        {
                            title: "üíß Vicus Caprarius",
                            meta: [
                                { icon: "‚è∞", text: "3:30 PM" },
                                { icon: "‚è±Ô∏è", text: "30 min" },
                                { text: "‚Ç¨3.50", class: "price-badge" }
                            ],
                            description: "The \"City of Water\" beneath Trevi Fountain. See the still-functioning aqueduct that feeds Trevi's fountains. Quick but fascinating."
                        },
                        {
                            title: "üåÖ Terrazza Les √âtoiles",
                            meta: [
                                { icon: "‚è∞", text: "6:00 PM" },
                                { icon: "üìç", text: "Book ahead" },
                                { text: "‚Ç¨20", class: "price-badge" }
                            ],
                            description: "Their ‚Ç¨20 cocktails include 'nduja arancini while you gaze at St. Peter's dome turning golden. Book ahead for sunset timing."
                        },
                        {
                            highlight: true,
                            title: "üçù Cesare al Casaletto",
                            meta: [
                                { icon: "‚è∞", text: "8:30 PM" },
                                { icon: "üìç", text: "20 min walk" },
                                { text: "‚Ç¨25-35", class: "price-badge" }
                            ],
                            description: "Rome's best gricia (like carbonara without eggs - pure pecorino and guanciale magic). Locals pack this place. The sommelier's natural wine selection is exceptional. Worth the 20-minute walk.",
                            tip: "üí° Walk home via Trastevere's cobblestones. Stop at Bar San Calisto for ‚Ç¨5 spritz among chess-playing Romans."
                        }
                    ]
                },
                day3: {
                    title: "Markets & Hidden Rome",
                    subtitle: "Monday, September 1 ‚Ä¢ Local secrets",
                    activities: [
                        {
                            title: "üõçÔ∏è Campo de' Fiori Market",
                            meta: [
                                { icon: "‚è∞", text: "8:30 AM" },
                                { icon: "üìç", text: "3 min walk" },
                                { text: "Free" }
                            ],
                            description: "Before it turns touristy. Buy fresh figs and pecorino for later. Try suppl√¨ at Supplizio - arrive at opening or they sell out. Cash only for most vendors."
                        },
                        {
                            highlight: true,
                            title: "üéÆ Domus Aurea VR Experience",
                            meta: [
                                { icon: "‚è∞", text: "10:00 AM" },
                                { icon: "‚è±Ô∏è", text: "1.5 hours" },
                                { text: "‚Ç¨16", class: "price-badge" }
                            ],
                            description: "Nero's \"Golden House\" comes alive through VR goggles showing its original gilt splendor. The underground halls stay mercifully cool. Weekends only - must be pre-booked."
                        },
                        {
                            title: "üçï Emma Pizzeria",
                            meta: [
                                { icon: "‚è∞", text: "1:00 PM" },
                                { icon: "üìç", text: "Campo area" },
                                { text: "‚Ç¨12-18", class: "price-badge" }
                            ],
                            description: "Neapolitan pies using Vesuvius tomatoes hit that crispy-bottom sweet spot. Outdoor seating perfect for people-watching. Open all August."
                        },
                        {
                            title: "üèõÔ∏è Baths of Caracalla",
                            meta: [
                                { icon: "‚è∞", text: "4:30 PM" },
                                { icon: "‚è±Ô∏è", text: "1.5 hours" },
                                { text: "‚Ç¨10", class: "price-badge" }
                            ],
                            description: "Massive 3rd-century ruins include underground heating systems. Audio guide essential to understand the engineering marvel. August bonus: hardly anyone visits despite proximity to Colosseum."
                        },
                        {
                            title: "üçπ Necci dal 1924",
                            meta: [
                                { icon: "‚è∞", text: "7:00 PM" },
                                { icon: "üìç", text: "Pigneto" },
                                { text: "‚Ç¨12-15", class: "price-badge" }
                            ],
                            description: "Metro to Pigneto neighborhood. Pasolini's old haunt maintains working-class authenticity with craft cocktails. The real Rome that tourists miss."
                        },
                        {
                            highlight: true,
                            title: "üçù Piperno",
                            meta: [
                                { icon: "‚è∞", text: "8:30 PM" },
                                { icon: "üìç", text: "Jewish Quarter" },
                                { text: "‚Ç¨30-40", class: "price-badge" }
                            ],
                            description: "160-year Jewish-Roman restaurant perfects carciofi alla giudia (fried artichokes) in their historic courtyard. The rigatoni con la pajata isn't for everyone (milk-fed veal intestines) but the amatriciana is sublime. Dress nicely. Book ahead.",
                            tip: "üí° End at Drink Kong in Monti - Blade Runner aesthetic meets Asian-fusion. Perfect final night energy."
                        }
                    ]
                }
            },

            foodCategories: [
                {
                    icon: "üçï",
                    title: "Pizza Al Taglio (By the Slice)",
                    restaurants: [
                        { name: "Antico Forno Roscioli", details: "Via dei Chiavari 34 (Regola) ‚Ä¢ ‚Ç¨3-8 ‚Ä¢ Since 1824, pizza rossa legendary" },
                        { name: "Bonci Pizzarium", details: "Near Vatican ‚Ä¢ ‚Ç¨20/two ‚Ä¢ 72-hour dough, creative toppings" },
                        { name: "Supplizio", details: "Via dei Banchi Vecchi ‚Ä¢ ‚Ç¨3-6 ‚Ä¢ Gourmet suppl√¨, arrive early" }
                    ]
                },
                {
                    icon: "üçù",
                    title: "Traditional Roman",
                    restaurants: [
                        { name: "Armando al Pantheon ‚≠ê", details: "Family since 1961 ‚Ä¢ ‚Ç¨25-35 ‚Ä¢ Michelin Bib Gourmand, book essential" },
                        { name: "Da Felice (Testaccio)", details: "Since 1936 ‚Ä¢ ‚Ç¨30-40 ‚Ä¢ Tableside cacio e pepe, Michelin recognition" },
                        { name: "Flavio al Velavevodetto", details: "Testaccio ‚Ä¢ ‚Ç¨12 gricia ‚Ä¢ Best value authentic Roman" },
                        { name: "La Campana", details: "Near Pantheon ‚Ä¢ ‚Ç¨15-35 ‚Ä¢ Claims world's oldest (1518)" }
                    ]
                },
                {
                    icon: "ü•Ç",
                    title: "Aperitivo Spots",
                    restaurants: [
                        { name: "Il Sorpasso", details: "Prati ‚Ä¢ ‚Ç¨15 ‚Ä¢ Generous charcuterie with drinks" },
                        { name: "Cvlto ‚≠ê", details: "Trastevere ‚Ä¢ ‚Ç¨15 ‚Ä¢ Former religious shop, password required" },
                        { name: "Freni e Frizioni", details: "Trastevere ‚Ä¢ ‚Ç¨12 ‚Ä¢ Converted mechanic shop, huge spread" },
                        { name: "Bar San Calisto", details: "Trastevere ‚Ä¢ ‚Ç¨5 ‚Ä¢ Local chess players, zero tourists" }
                    ]
                },
                {
                    icon: "üç∑",
                    title: "Rooftop Bars",
                    restaurants: [
                        { name: "Terrazza Les √âtoiles", details: "‚Ç¨20 cocktails ‚Ä¢ St. Peter's views ‚Ä¢ Book for sunset" },
                        { name: "Terrazza Borromini", details: "Piazza Navona ‚Ä¢ ‚Ç¨25-30 aperitivo ‚Ä¢ Chef-prepared canap√©s" },
                        { name: "Jacopa (Budget)", details: "Trastevere ‚Ä¢ ‚Ç¨10-12 cocktails ‚Ä¢ Rome's cheapest rooftop" }
                    ]
                }
            ],

            bookingCategories: [
                {
                    icon: "‚ö°",
                    title: "30 Days Before (July 31)",
                    style: "background: rgba(251, 191, 36, 0.1); border-left-color: var(--warning);",
                    content: "<strong>Colosseum Underground</strong><br>8:45 AM Rome time EXACTLY on ticketing.colosseo.it<br>‚Ç¨24-30 ‚Ä¢ Sells out in seconds ‚Ä¢ Groups of 25 vs thousands<br><em>Note: Regular Colosseum tour already booked ‚úÖ</em>",
                    button: {
                        text: "Book Colosseum",
                        onclick: "window.open('https://ticketing.colosseo.it')",
                        class: "btn-primary",
                        style: "margin-top: 12px; width: 100%;"
                    }
                },
                {
                    icon: "üìÖ",
                    title: "Book ASAP",
                    restaurants: [
                        { name: "Vatican Museums", details: "‚Ç¨20+5 ‚Ä¢ museivaticani.va ‚Ä¢ Early entry worth it" },
                        { name: "Domus Aurea VR", details: "‚Ç¨16 ‚Ä¢ Weekends only ‚Ä¢ Underground & cool" },
                        { name: "Armando al Pantheon", details: "Dinner reservation ‚Ä¢ Family-run since 1961" }
                    ]
                },
                {
                    icon: "üì±",
                    title: "This Week",
                    restaurants: [
                        { name: "TheFork App", details: "30-50% off many restaurants ‚Ä¢ Book Oste Nostro" },
                        { name: "Jerry Thomas Password", details: "thejerrythomasproject.it ‚Ä¢ ‚Ç¨5 membership" },
                        { name: "Rooftop Reservations", details: "Terrazza Les √âtoiles for sunset" }
                    ]
                },
                {
                    icon: "üì≤",
                    title: "Apps to Download",
                    restaurants: [
                        { name: "Waidy WOW", details: "Find Rome's 2,500 free water fountains" },
                        { name: "Moovit", details: "Real-time public transport" },
                        { name: "Google Translate", details: "Download Italian offline" },
                        { name: "TheFork", details: "Restaurant bookings with discounts" }
                    ]
                }
            ]
        };

        // TEMPLATE FUNCTIONS
        function createTabs() {
            return travelData.tabs.map((tab, index) => `
                <div class="tab ${index === 0 ? 'active' : ''}" onclick="showSection('${tab.id}')">
                    <span class="tab-label">${tab.label}</span>
                    <span class="tab-main">${tab.main}</span>
                </div>
            `).join('');
        }

        function createMetaItem(meta) {
            const icon = meta.icon || '';
            const text = meta.text;
            const className = meta.class || '';
            
            if (className === 'price-badge') {
                return `<span class="price-badge">${text}</span>`;
            }
            return `<span class="meta-item">${icon} ${text}</span>`;
        }

        function createActivityCard(activity, index) {
            const highlight = activity.highlight ? 'highlight' : '';
            const meta = activity.meta ? activity.meta.map(createMetaItem).join('') : '';
            const description = activity.description || '';
            const extraDescription = activity.extraDescription ? `<p class="activity-description" style="margin-top: 12px;">${activity.extraDescription}</p>` : '';
            const extraDescription2 = activity.extraDescription2 ? `<p class="activity-description" style="margin-top: 12px;">${activity.extraDescription2}</p>` : '';
            const tip = activity.tip ? `<div class="tip">${activity.tip}</div>` : '';
            
            const restaurants = activity.restaurants ? `
                <div class="restaurant-grid">
                    ${activity.restaurants.map(r => `
                        <div class="restaurant-item">
                            <div class="restaurant-name">${r.name}</div>
                            <div class="restaurant-details">${r.details}</div>
                        </div>
                    `).join('')}
                </div>
            ` : '';
            
            const buttons = activity.buttons ? `
                <div class="action-buttons">
                    ${activity.buttons.map(btn => 
                        btn.url ? `<a href="${btn.url}" class="btn ${btn.class}" target="_blank">${btn.text}</a>` :
                        btn.onclick ? `<button class="btn ${btn.class}" onclick="${btn.onclick}">${btn.text}</button>` :
                        `<span class="btn ${btn.class}">${btn.text}</span>`
                    ).join('')}
                </div>
            ` : '';
            
            // Debug logging
            console.log('Creating card for:', activity.title);
            if (activity.title && activity.title.includes('Colosseum')) {
                console.log('Colosseum activity:', activity);
                console.log('Buttons data:', activity.buttons);
                console.log('Buttons HTML:', buttons);
            }

            return `
                <div class="timeline-item ${highlight}">
                    <div class="timeline-dot"></div>
                    <div class="activity-card">
                        <div class="activity-header">
                            <div class="activity-main">
                                <h3 class="activity-title">${activity.title}</h3>
                                <div class="activity-meta">${meta}</div>
                            </div>
                            <span class="expand-icon">‚åÑ</span>
                        </div>
                        <div class="activity-details">
                            ${description ? `<p class="activity-description">${description}</p>` : ''}
                            ${extraDescription}
                            ${extraDescription2}
                            ${tip}
                            ${restaurants}
                        </div>
                        ${buttons}
                    </div>
                </div>
            `;
        }

        function createEssentialCard(essential) {
            const button = essential.button ? `
                <button class="btn ${essential.button.class}" style="${essential.button.style || ''}" onclick="${essential.button.onclick}">
                    ${essential.button.text}
                </button>
            ` : '';
            
            return `
                <div class="essential-card">
                    <h3><span class="icon">${essential.icon}</span> ${essential.title}</h3>
                    <div class="essential-content">
                        ${essential.content}
                    </div>
                    ${essential.tip ? `<div class="tip">${essential.tip}</div>` : ''}
                    ${button}
                </div>
            `;
        }

        function createFoodCategory(category) {
            return `
                <div class="essential-card">
                    <h3><span class="icon">${category.icon}</span> ${category.title}</h3>
                    <div class="restaurant-grid">
                        ${category.restaurants.map(r => `
                            <div class="restaurant-item">
                                <div class="restaurant-name">${r.name}</div>
                                <div class="restaurant-details">${r.details}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function createBookingCategory(category) {
            const restaurants = category.restaurants ? `
                <div class="restaurant-grid">
                    ${category.restaurants.map(r => `
                        <div class="restaurant-item">
                            <div class="restaurant-name">${r.name}</div>
                            <div class="restaurant-details">${r.details}</div>
                        </div>
                    `).join('')}
                </div>
            ` : '';

            const button = category.button ? `
                <button class="btn ${category.button.class}" style="${category.button.style || ''}" onclick="${category.button.onclick}">
                    ${category.button.text}
                </button>
            ` : '';

            return `
                <div class="essential-card" style="${category.style || ''}">
                    <h3><span class="icon">${category.icon}</span> ${category.title}</h3>
                    ${category.content ? `<div class="essential-content">${category.content}</div>` : ''}
                    ${restaurants}
                    ${button}
                </div>
            `;
        }

        function createDaySection(dayKey, dayData) {
            const reminder = dayData.reminder ? `
                <div class="booking-reminder">
                    <h4>${dayData.reminder.title}</h4>
                    <p>${dayData.reminder.text}</p>
                </div>
            ` : '';

            return `
                <section class="section" id="${dayKey}">
                    <div class="day-header">
                        <h2 class="day-title">${dayData.title}</h2>
                        <p class="day-subtitle">${dayData.subtitle}</p>
                    </div>
                    ${reminder}
                    <div class="timeline">
                        ${dayData.activities.map(createActivityCard).join('')}
                    </div>
                </section>
            `;
        }

        // GENERATE ALL CONTENT
        function generateAllContent() {
            console.log('Generating all content...');
            const tabsContainer = document.getElementById('tabs-container');
            const contentContainer = document.getElementById('content-container');

            // Generate tabs
            tabsContainer.innerHTML = createTabs();

            // Generate content
            const content = `
                <!-- Essentials Section -->
                <section class="section active" id="essentials">
                    <div class="quick-stat">
                        <h3>Your Trip Overview</h3>
                        <div class="stat-grid">
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.days}</div>
                                <div class="stat-label">Days in Rome</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.budget}</div>
                                <div class="stat-label">Est. Total Budget</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.location}</div>
                                <div class="stat-label">Your Base</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${travelData.stats.temperature}</div>
                                <div class="stat-label">August Avg</div>
                            </div>
                        </div>
                    </div>
                    ${travelData.essentials.map(createEssentialCard).join('')}
                </section>

                <!-- Day Sections -->
                ${Object.keys(travelData.days).map(dayKey => 
                    createDaySection(dayKey, travelData.days[dayKey])
                ).join('')}

                <!-- Food Section -->
                <section class="section" id="food">
                    <div class="day-header">
                        <h2 class="day-title">Food Bible</h2>
                        <p class="day-subtitle">Every restaurant worth knowing</p>
                    </div>
                    ${travelData.foodCategories.map(createFoodCategory).join('')}
                </section>

                <!-- Bookings Section -->
                <section class="section" id="bookings">
                    <div class="day-header">
                        <h2 class="day-title">Booking Checklist</h2>
                        <p class="day-subtitle">Don't miss these deadlines</p>
                    </div>
                    ${travelData.bookingCategories.map(createBookingCategory).join('')}
                </section>
            `;

            contentContainer.innerHTML = content;
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            generateAllContent();
            
            // Handle all clicks with event delegation
            document.addEventListener('click', function(e) {
                // Debug logging
                console.log('Clicked element:', e.target);
                console.log('Element tagName:', e.target.tagName);
                console.log('Element className:', e.target.className);
                console.log('Parent element:', e.target.parentElement);
                
                // Check if we clicked on a button or link
                const button = e.target.closest('.btn');
                const actionButtons = e.target.closest('.action-buttons');
                const link = e.target.closest('a');
                
                if (button || link) {
                    console.log('Button/link detected:', button || link);
                    console.log('URL:', (button || link).href);
                }
                
                // If we clicked a button/link, don't do anything else
                if (button || actionButtons || link) {
                    console.log('Interactive element clicked, not toggling card');
                    // Links will navigate naturally, buttons will execute their onclick
                    return;
                }
                
                // Check if we clicked on an activity card
                const card = e.target.closest('.activity-card');
                if (card) {
                    console.log('Toggling card');
                    toggleCard(card);
                }
            });
        });

        // Update Rome time
        function updateRomeTime() {
            const romeTime = new Date().toLocaleString("en-US", {
                timeZone: "Europe/Rome",
                hour: "2-digit",
                minute: "2-digit",
                hour12: false
            });
            document.getElementById('rome-time').textContent = romeTime;
        }
        updateRomeTime();
        setInterval(updateRomeTime, 60000);

        // Tab navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.closest('.tab').classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Card expansion
        function toggleCard(card) {
            const isExpanded = card.classList.contains('expanded');
            
            if (!isExpanded) {
                // Expanding
                card.classList.remove('collapsing');
                card.classList.add('expanded');
            } else {
                // Collapsing - add class for faster animation
                card.classList.add('collapsing');
                card.classList.remove('expanded');
                setTimeout(() => {
                    card.classList.remove('collapsing');
                }, 150);
            }
            
            // Haptic feedback on supported devices
            if ('vibrate' in navigator) {
                navigator.vibrate(10);
            }
        }

        // Get directions
        function getDirections() {
            const destinations = {
                'Campo de\' Fiori': 'Campo+de+Fiori+Rome',
                'Pantheon': 'Pantheon+Rome',
                'Jewish Quarter': 'Jewish+Quarter+Rome',
                'Trastevere': 'Trastevere+Rome',
                'Colosseum': 'Colosseum+Rome',
                'Vatican': 'Vatican+City'
            };
            
            const destination = prompt('Where do you want to go?\n\n1. Campo de\' Fiori (3 min)\n2. Pantheon (8 min)\n3. Jewish Quarter (5 min)\n4. Trastevere (10 min)\n5. Colosseum (20 min)\n6. Vatican (25 min)');
            
            if (destination && destinations[destination]) {
                window.open(`https://maps.apple.com/?q=${destinations[destination]}`);
            }
        }

        // Touch swipe support
        let touchStartX = 0;
        let touchEndX = 0;
        
        document.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        document.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            const activeSection = document.querySelector('.section.active').id;
            const sections = ['essentials', 'day0', 'day1', 'day2', 'day3', 'food', 'bookings'];
            const currentIndex = sections.indexOf(activeSection);
            
            if (touchEndX < touchStartX - 50 && currentIndex < sections.length - 1) {
                // Swipe left - next day
                const nextSection = sections[currentIndex + 1];
                document.getElementById(nextSection).classList.add('active');
                document.getElementById(activeSection).classList.remove('active');
                updateTabs(currentIndex + 1);
            }
            
            if (touchEndX > touchStartX + 50 && currentIndex > 0) {
                // Swipe right - previous day
                const prevSection = sections[currentIndex - 1];
                document.getElementById(prevSection).classList.add('active');
                document.getElementById(activeSection).classList.remove('active');
                updateTabs(currentIndex - 1);
            }
        }
        
        function updateTabs(index) {
            document.querySelectorAll('.tab').forEach((t, i) => {
                t.classList.toggle('active', i === index);
            });
        }

        // Add "What's Open Now" feature
        function checkWhatsOpen() {
            const now = new Date();
            const romeTime = new Date(now.toLocaleString("en-US", {timeZone: "Europe/Rome"}));
            const hours = romeTime.getHours();
            
            let status = '';
            if (hours >= 8 && hours < 12) {
                status = 'Museums & monuments open';
            } else if (hours >= 12 && hours < 15) {
                status = 'Lunch time - restaurants open';
            } else if (hours >= 15 && hours < 19) {
                status = 'Siesta - shops may be closed';
            } else if (hours >= 19 && hours < 23) {
                status = 'Aperitivo & dinner time';
            } else {
                status = 'Late night - bars open';
            }
            
            // Could add a floating badge
            if (hours >= 7 && hours < 23) {
                const badge = document.createElement('div');
                badge.className = 'floating-badge';
                badge.textContent = status;
                document.body.appendChild(badge);
                setTimeout(() => badge.remove(), 5000);
            }
        }

        // Check on load
        setTimeout(checkWhatsOpen, 2000);
    </script>
</body>
</html>